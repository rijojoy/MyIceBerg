qx.$$packageData['33']={"locales":{},"resources":{},"translations":{}};
qx.Part.$$notifyLoad("33", function() {
(function(){var m="saveSettings",l="execute",k='westorelggman/media-playback-start.png',j="colwidths",h="colnames",g="data",f="getAllColumns",d="modern",b="dark",a="theme",W="val",V="helpTxt",U="onServerAnswer",T="auto",S="themeLine",R="changeSelection",Q="reloadButton",P="SilverBlue",O='resetGeneralSettings',N="saveTheme",t="pollingInterval",u="Reset To Default",r="Theme Settings",s="Save Columnwidths",p="Table Settings",q="qx.event.type.Data",n='cs24',o="westorelggman.Settings",v='SilverBlue',w="westorelggman/view-refresh.png",D='saveTheme',B='resetColumnWidth',H="resetColumnWidth",F="getElggData",J="demo",I="General Settings",y='dark',M='modern',L="cs24",K='saveColumnWidth',x="Reset to default",z="Save",A="generalForm",C="pluginWidth",E="changeValue",G='saveGeneralSettings';
qx.Class.define(o,{extend:qx.ui.container.Composite,construct:function(X){if(!X){this.debug("rpc object must have been specified in construct");
return;
}westorelggmanSettings=this;
this.__T=X;
qx.ui.container.Composite.call(this);
this.__bA=qx.theme.manager.Meta.getInstance().getTheme();
this.__a();
this.addListener(U,this._onServerAnswer,this);
},events:{"onServerAnswer":q},members:{__bA:null,__T:null,__a:function(){this.setLayout(new qx.ui.layout.VBox(10));
this.getChildControl(S);
var Y=new qx.ui.groupbox.GroupBox(I);
Y.setLayout(new qx.ui.layout.Canvas());
this.add(Y);
var be=new qx.ui.form.Form();
var bi=this.__bB=new qx.ui.form.Spinner(400,elggmanMainContainer.getWidth(),2048);
bi.setWidth(200);
bi.addListener(E,function(e){var bq=e.getData();
elggmanMainContainer.setWidth(bq);
elggmanMainContainer.setMaxWidth(bq);
elggmanMainContainer.setMinWidth(bq);
});
be.add(bi,C,null,T);
var ba=this.__bC=new qx.ui.form.Spinner(0,ElggMan_PollingInterval,300);
ba.setWidth(200);
be.add(ba,t,null,T);
var bn=new qx.ui.form.Button(z);
be.addButton(bn);
var bg=new qx.ui.form.Button(x);
be.addButton(bg);
Y.add(new westorelggman.form.renderer.Single(be));
var bl=new qx.data.controller.Form(null,be);
var bo=bl.createModel();
bn.addListener(l,function(){this.__bJ();
},this);
bg.addListener(l,function(){this.__bK();
},this);
this.add(new qx.ui.basic.Label(p));
var bc=new qx.ui.container.Composite();
bc.setLayout(new qx.ui.layout.HBox(10));
var bf=new qx.ui.form.RadioButton(ElggMan_rb_view_admin);
var bd=new qx.ui.form.RadioButton(ElggMan_rb_view_user);
this.__bD=ElggMan_friends;
var bb=new qx.ui.form.RadioGroup(bf,bd);
bb.addListener(R,function(e){this.__bD=e.getData()[0].getLabel();
this.__T.callAsync(function(br,bs,bt){if(bs!=null){elggmanMainContainer.alert("Async("+bt+") exception: "+bs);
}else{self.__bO(this,br.data);
}},f,W,this.__bD);
},this);
bc.add(bf);
bc.add(bd);
this.add(bc);
var bh=this.__bE=new qx.ui.container.Composite(new qx.ui.layout.Canvas());
this.add(bh);
var bm=this.__be=new qx.ui.basic.Label();
bm.set({rich:true,wrap:true});
this.add(bm);
var bk=new qx.ui.container.Composite(new qx.ui.layout.HBox(10));
var bj=this.__bF=new qx.ui.form.Button(s);
bj.addListener(l,this.__bL,this);
var bp=this.__bG=new qx.ui.form.Button(u);
bp.addListener(l,this.__bM,this);
bk.add(bj);
bk.add(bp);
this.add(bk);
var self=this;
this.__T.callAsync(function(bu,bv,bw){if(bv!=null){elggmanMainContainer.alert("Async("+bw+") exception: "+bv);
}else{self.__bO(this,bu.data);
}},f,W,this.__bD);
},_createChildControlImpl:function(bx){var by;

switch(bx){case S:by=new qx.ui.groupbox.GroupBox(r);
by.setLayout(new qx.ui.layout.HBox(10));
by.add(this.getChildControl(a));
by.add(this.getChildControl(Q));
this.add(by);
break;
case a:by=new qx.ui.form.SelectBox();
by.setWidth(200);
by.add(this.getChildControl(d));
by.add(this.getChildControl(b));
by.add(this.getChildControl(P));
by.setSelection([this.getChildControl(ElggMan_Theme)]);
by.addListener(R,this.__bH,by);
break;
case d:by=new qx.ui.form.ListItem(ElggMan_theme_modern,k,M);
break;
case b:by=new qx.ui.form.ListItem(ElggMan_theme_dark,k,y);
break;
case L:by=new qx.ui.form.ListItem(ElggMan_theme_cs24,k,n);
break;
case P:by=new qx.ui.form.ListItem(ElggMan_theme_cs24,k,v);
break;
case Q:by=new qx.ui.form.Button(ElggMan_save_reload,w);
by.addListener(l,this.__bI,this);
break;
case A:break;
}return by||qx.ui.container.Composite.prototype._createChildControlImpl.call(this,bx);
},__bH:function(e){var bz=this.getSelection()[0].getModel();

switch(bz){case b:break;
case d:break;
}},__bI:function(){var bA=this.getChildControl(a).getSelection()[0].getModel();
var bB={action:D,theme:bA};
this.__bN(m,bB);
},__bJ:function(){var bC={action:G,pluginWidth:this.__bB.getValue(),pollingInterval:this.__bC.getValue()};
this.__bN(m,bC);
},__bK:function(){var bD={action:O};
this.__bN(m,bD);
},__bL:function(){var c=this.__bb.getOverallColumnCount();
var bF=[];

for(var i=0;i<c;i++){bF.push(this.__bb.getColumnWidth(i));
}var bE={action:K,type:this.__bD,colWidths:bF};
this.__bN(m,bE);
},__bM:function(){var bG={action:B,type:this.__bD};
this.__bN(m,bG);
},__bN:function(bH,bI){var bJ={method:bH,action:bI.action};
var self=this;
this.__T.callAsync(function(bK,bL,bM){if(bL!=null){elggmanMainContainer.alert("Async("+bM+") exception: "+bL);
}else{if(bK.err)elggmanMainContainer.alert(bK.err);
else{if(bK.msg)elggmanMainContainer.alert(bK.txt);
self.fireDataEvent(U,bK);
}}},bH,bI,bJ);
},_onServerAnswer:function(e){var bN=e.getData();

if(bN.method==m){switch(bN.action){case N:if(bN.success){window.location.reload(true);
}break;
case H:var self=this;
this.__T.callAsync(function(bO,bP,bQ){if(bP!=null){elggmanMainContainer.alert("Async("+bQ+") exception: "+bP);
}else{self.__bO(this,bO.data);
}},f,W,this.__bD);
break;
}if(bN.txt){elggmanMainContainer.alert(bN.txt);
}}},__bO:function(bR,bS){var bT=this.__Y=new qx.ui.table.model.Simple();
bT.setColumns(bS);
var bV=this.__ba=new westorelggman.table.Table(bT);
bV.set({decorator:null,height:100,columnVisibilityButtonVisible:false,showCellFocusIndicator:true});
this.__bE.add(bV,{left:0,right:0});
var bU=this.__bb=bV.getTableColumnModel();

with(bU){setColumnVisible(0,false);
setColumnWidth(0,0);
setColumnWidth(1,22);
setColumnWidth(2,22);
setDataCellRenderer(1,new qx.ui.table.cellrenderer.Boolean());
setDataCellRenderer(2,new qx.ui.table.cellrenderer.Image(16,16));
}this.__bP();
},__bP:function(){var self=this;
var bW=this.__Y;
var bX=this.__bb;
this.__T.callAsync(function(bY,ca,cb){if(ca!=null){elggmanMainContainer.alert("Async("+cb+") exception: "+ca);
}else{if(!bY)bY=new Array();

if(bY.err){elggmanMainContainer.alert(bY.err);
return;
}var cd=[[]];

if(!bY[g])bY[g]=new Array();
bW.setData(bY[g]);

if(bY[h]&&bY[h].length){bW.setColumns(bY[h],bY[h]);
}rlen=bY[j].length;
var cc=[null,null,null];

if(rlen){for(i=0;i<rlen;i++){bX.setColumnWidth(i,bY[j][i]);

if(bY[j][i]==0){bX.setColumnVisible(i,false);
}
if(i>2){cc.push(bY[j][i]);
bW.setColumnEditable(i,true);
}else{bW.setColumnEditable(i,false);
}}}if(bY[V]){self.__be.setValue(bY[V]);
}}},F,J,null,this.__bD);
},__bQ:function(e){}}});
})();
(function(){var k="textfield",j="",i="downbutton",h="upbutton",g="Number",f="inner",d="PageUp",c="Boolean",b="changeValue",a="Down",J="Up",I="execute",H="PageDown",G="changeLocale",F="qx.dynlocale",E="_applyEditable",D="_applyWrap",C="keydown",B="\-]",A="mousewheel",r="_applyValue",s="y",p="number",q="_applyMinimum",n="qx.util.format.NumberFormat",o="[0-9",l="keyup",m="spinner",t="this._checkValue(value)",u="_applyMaximum",w="changeNumberFormat",v="changeMaximum",y="changeMinimum",x="_applyNumberFormat",z="qx.ui.form.Spinner";
qx.Class.define(z,{extend:qx.ui.core.Widget,implement:[qx.ui.form.INumberForm,qx.ui.form.IRange,qx.ui.form.IForm],include:[qx.ui.core.MContentPadding,qx.ui.form.MForm],construct:function(K,L,M){qx.ui.core.Widget.call(this);
var N=new qx.ui.layout.Grid();
N.setColumnFlex(0,1);
N.setRowFlex(0,1);
N.setRowFlex(1,1);
this._setLayout(N);
this.addListener(C,this._onKeyDown,this);
this.addListener(l,this._onKeyUp,this);
this.addListener(A,this._onMouseWheel,this);

if(qx.core.Environment.get(F)){qx.locale.Manager.getInstance().addListener(G,this._onChangeLocale,this);
}this._createChildControl(k);
this._createChildControl(h);
this._createChildControl(i);
if(K!=null){this.setMinimum(K);
}
if(M!=null){this.setMaximum(M);
}
if(L!==undefined){this.setValue(L);
}else{this.initValue();
}},properties:{appearance:{refine:true,init:m},focusable:{refine:true,init:true},singleStep:{check:g,init:1},pageStep:{check:g,init:10},minimum:{check:g,apply:q,init:0,event:y},value:{check:t,nullable:true,apply:r,init:0,event:b},maximum:{check:g,apply:u,init:100,event:v},wrap:{check:c,init:false,apply:D},editable:{check:c,init:true,apply:E},numberFormat:{check:n,apply:x,nullable:true},allowShrinkY:{refine:true,init:false}},members:{__gv:null,__gw:false,__gx:false,_createChildControlImpl:function(O,P){var Q;

switch(O){case k:Q=new qx.ui.form.TextField();
Q.setFilter(this._getFilterRegExp());
Q.addState(f);
Q.setWidth(40);
Q.setFocusable(false);
Q.addListener(b,this._onTextChange,this);
this._add(Q,{column:0,row:0,rowSpan:2});
break;
case h:Q=new qx.ui.form.RepeatButton();
Q.addState(f);
Q.setFocusable(false);
Q.addListener(I,this._countUp,this);
this._add(Q,{column:1,row:0});
break;
case i:Q=new qx.ui.form.RepeatButton();
Q.addState(f);
Q.setFocusable(false);
Q.addListener(I,this._countDown,this);
this._add(Q,{column:1,row:1});
break;
}return Q||qx.ui.core.Widget.prototype._createChildControlImpl.call(this,O);
},_getFilterRegExp:function(){var V=qx.locale.Number.getDecimalSeparator(qx.locale.Manager.getInstance().getLocale());
var U=qx.locale.Number.getGroupSeparator(qx.locale.Manager.getInstance().getLocale());
var T=j;
var R=j;

if(this.getNumberFormat()!==null){T=this.getNumberFormat().getPrefix()||j;
R=this.getNumberFormat().getPostfix()||j;
}var S=new RegExp(o+qx.lang.String.escapeRegexpChars(V)+qx.lang.String.escapeRegexpChars(U)+qx.lang.String.escapeRegexpChars(T)+qx.lang.String.escapeRegexpChars(R)+B);
return S;
},_forwardStates:{focused:true,invalid:true},tabFocus:function(){var W=this.getChildControl(k);
W.getFocusElement().focus();
W.selectAllText();
},_applyMinimum:function(X,Y){if(this.getMaximum()<X){this.setMaximum(X);
}
if(this.getValue()<X){this.setValue(X);
}else{this._updateButtons();
}},_applyMaximum:function(ba,bb){if(this.getMinimum()>ba){this.setMinimum(ba);
}
if(this.getValue()>ba){this.setValue(ba);
}else{this._updateButtons();
}},_applyEnabled:function(bc,bd){qx.ui.core.Widget.prototype._applyEnabled.call(this,bc,bd);
this._updateButtons();
},_checkValue:function(be){return typeof be===p&&be>=this.getMinimum()&&be<=this.getMaximum();
},_applyValue:function(bf,bg){var bh=this.getChildControl(k);
this._updateButtons();
this.__gv=bf;
if(bf!==null){if(this.getNumberFormat()){bh.setValue(this.getNumberFormat().format(bf));
}else{bh.setValue(bf+j);
}}else{bh.setValue(j);
}},_applyEditable:function(bi,bj){var bk=this.getChildControl(k);

if(bk){bk.setReadOnly(!bi);
}},_applyWrap:function(bl,bm){this._updateButtons();
},_applyNumberFormat:function(bn,bo){var bp=this.getChildControl(k);
bp.setFilter(this._getFilterRegExp());
this.getNumberFormat().addListener(w,this._onChangeNumberFormat,this);
this._applyValue(this.__gv,undefined);
},_getContentPaddingTarget:function(){return this.getChildControl(k);
},_updateButtons:function(){var br=this.getChildControl(h);
var bq=this.getChildControl(i);
var bs=this.getValue();

if(!this.getEnabled()){br.setEnabled(false);
bq.setEnabled(false);
}else{if(this.getWrap()){br.setEnabled(true);
bq.setEnabled(true);
}else{if(bs!==null&&bs<this.getMaximum()){br.setEnabled(true);
}else{br.setEnabled(false);
}if(bs!==null&&bs>this.getMinimum()){bq.setEnabled(true);
}else{bq.setEnabled(false);
}}}},_onKeyDown:function(e){switch(e.getKeyIdentifier()){case d:this.__gw=true;
case J:this.getChildControl(h).press();
break;
case H:this.__gx=true;
case a:this.getChildControl(i).press();
break;
default:return ;
}e.stopPropagation();
e.preventDefault();
},_onKeyUp:function(e){switch(e.getKeyIdentifier()){case d:this.getChildControl(h).release();
this.__gw=false;
break;
case J:this.getChildControl(h).release();
break;
case H:this.getChildControl(i).release();
this.__gx=false;
break;
case a:this.getChildControl(i).release();
break;
}},_onMouseWheel:function(e){var bt=e.getWheelDelta(s);

if(bt>0){this._countDown();
}else if(bt<0){this._countUp();
}e.stop();
},_onTextChange:function(e){var bu=this.getChildControl(k);
var bv;
if(this.getNumberFormat()){try{bv=this.getNumberFormat().parse(bu.getValue());
}catch(bw){}}if(bv===undefined){bv=parseFloat(bu.getValue());
}if(!isNaN(bv)){if(bv>this.getMaximum()){bu.setValue(this.getMaximum()+j);
return;
}else if(bv<this.getMinimum()){bu.setValue(this.getMinimum()+j);
return;
}this.setValue(bv);
}else{this._applyValue(this.__gv,undefined);
}},_onChangeLocale:function(bx){if(this.getNumberFormat()!==null){this.setNumberFormat(this.getNumberFormat());
var by=this.getChildControl(k);
by.setFilter(this._getFilterRegExp());
by.setValue(this.getNumberFormat().format(this.getValue()));
}},_onChangeNumberFormat:function(bz){var bA=this.getChildControl(k);
bA.setFilter(this._getFilterRegExp());
bA.setValue(this.getNumberFormat().format(this.getValue()));
},_countUp:function(){if(this.__gw){var bC=this.getValue()+this.getPageStep();
}else{var bC=this.getValue()+this.getSingleStep();
}if(this.getWrap()){if(bC>this.getMaximum()){var bB=this.getMaximum()-bC;
bC=this.getMinimum()+bB;
}}this.gotoValue(bC);
},_countDown:function(){if(this.__gx){var bE=this.getValue()-this.getPageStep();
}else{var bE=this.getValue()-this.getSingleStep();
}if(this.getWrap()){if(bE<this.getMinimum()){var bD=this.getMinimum()+bE;
bE=this.getMaximum()-bD;
}}this.gotoValue(bE);
},gotoValue:function(bF){return this.setValue(Math.min(this.getMaximum(),Math.max(this.getMinimum(),bF)));
}},destruct:function(){if(qx.core.Environment.get(F)){qx.locale.Manager.getInstance().removeListener(G,this._onChangeLocale,this);
}}});
})();

});