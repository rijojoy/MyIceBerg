qx.$$packageData['32']={"locales":{},"resources":{"qx/icon/Oxygen/16/actions/edit-clear.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-copy.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-cut.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-delete.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-find.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-paste.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-redo.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-select-all.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/edit-undo.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-indent-less.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-indent-more.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-center.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-fill.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-left.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-justify-right.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-bold.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-direction-ltr.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-direction-rtl.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-italic.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-strikethrough.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/format-text-underline.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/insert-image.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/insert-link.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/insert-text.png":[16,16,"png","qx"],"qx/icon/Oxygen/16/actions/view-fullscreen.png":[16,16,"png","qx"],"qx/static/blank.html":"qx","westorelggman/htmlarea/format-fill-color.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/format-list-ordered.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/format-list-unordered.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/format-text-color.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/insert-horizontal-rule.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/insert-table.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/insert-text.png":[16,16,"png","westorelggman"],"westorelggman/htmlarea/qooxdoo_logo.png":[136,41,"png","westorelggman"]},"translations":{"C":{},"en":{}}};
qx.Part.$$notifyLoad("32", function() {
(function(){var l="selected",k="click",j="last-month-button",h="default",g="next-month-button",f="otherMonth",d="month-year-label",c="last-year-button",b="navigation-bar",a="next-year-button",bj="date-pane",bi="PageUp",bh="mousedown",bg="today",bf="Integer",be="PageDown",bd="changeLocale",bc="next-month-button-tooltip",bb="last-month-button-tooltip",ba="qx.dynlocale",s="last-year-button-tooltip",t="next-year-button-tooltip",q="weekend",r="day",o="lastMonth",p="Next month",m="Escape",n="Left",w="weekday",z="changeValue",H="Space",F="Down",P="qx.ui.control.DateChooser",K="Date",V="Enter",T="dblclick",B="day#",Y="Next year",X="_applyValue",W="Up",A="weekday#",D="datechooser",E="header",G="week",I="lastYear",L="nextYear",Q="changeShownYear",U="week#",u="Last month",v="Last year",C="mouseup",O="keypress",N="",M="nextMonth",S="Right",R="week#0",J="changeShownMonth";
qx.Class.define(P,{extend:qx.ui.core.Widget,include:[qx.ui.core.MExecutable,qx.ui.form.MForm],implement:[qx.ui.form.IExecutable,qx.ui.form.IForm,qx.ui.form.IDateForm],construct:function(bk){qx.ui.core.Widget.call(this);
var bm=new qx.ui.layout.VBox();
this._setLayout(bm);
this._createChildControl(b);
this._createChildControl(bj);
this.addListener(O,this._onKeyPress);
var bl=(bk!=null)?bk:new Date();
this.showMonth(bl.getMonth(),bl.getFullYear());
if(qx.core.Environment.get(ba)){qx.locale.Manager.getInstance().addListener(bd,this._updateDatePane,this);
}this.addListener(bh,this._onMouseUpDown,this);
this.addListener(C,this._onMouseUpDown,this);
},statics:{MONTH_YEAR_FORMAT:qx.locale.Date.getDateTimeFormat("yyyyMMMM","MMMM yyyy"),WEEKDAY_FORMAT:"EE",WEEK_FORMAT:"ww"},properties:{appearance:{refine:true,init:D},width:{refine:true,init:200},height:{refine:true,init:150},shownMonth:{check:bf,init:null,nullable:true,event:J},shownYear:{check:bf,init:null,nullable:true,event:Q},value:{check:K,init:null,nullable:true,event:z,apply:X}},members:{__cJ:null,__cK:null,__cL:null,_forwardStates:{invalid:true},_createChildControlImpl:function(bn,bo){var bp;

switch(bn){case b:bp=new qx.ui.container.Composite(new qx.ui.layout.HBox());
bp.add(this.getChildControl(c));
bp.add(this.getChildControl(j));
bp.add(this.getChildControl(d),{flex:1});
bp.add(this.getChildControl(g));
bp.add(this.getChildControl(a));
this._add(bp);
break;
case s:bp=new qx.ui.tooltip.ToolTip(this.tr(v));
break;
case c:bp=new qx.ui.toolbar.Button();
bp.addState(I);
bp.setFocusable(false);
bp.setToolTip(this.getChildControl(s));
bp.addListener(k,this._onNavButtonClicked,this);
break;
case bb:bp=new qx.ui.tooltip.ToolTip(this.tr(u));
break;
case j:bp=new qx.ui.toolbar.Button();
bp.addState(o);
bp.setFocusable(false);
bp.setToolTip(this.getChildControl(bb));
bp.addListener(k,this._onNavButtonClicked,this);
break;
case bc:bp=new qx.ui.tooltip.ToolTip(this.tr(p));
break;
case g:bp=new qx.ui.toolbar.Button();
bp.addState(M);
bp.setFocusable(false);
bp.setToolTip(this.getChildControl(bc));
bp.addListener(k,this._onNavButtonClicked,this);
break;
case t:bp=new qx.ui.tooltip.ToolTip(this.tr(Y));
break;
case a:bp=new qx.ui.toolbar.Button();
bp.addState(L);
bp.setFocusable(false);
bp.setToolTip(this.getChildControl(t));
bp.addListener(k,this._onNavButtonClicked,this);
break;
case d:bp=new qx.ui.basic.Label();
bp.setAllowGrowX(true);
bp.setAnonymous(true);
break;
case G:bp=new qx.ui.basic.Label();
bp.setAllowGrowX(true);
bp.setAllowGrowY(true);
bp.setSelectable(false);
bp.setAnonymous(true);
bp.setCursor(h);
break;
case w:bp=new qx.ui.basic.Label();
bp.setAllowGrowX(true);
bp.setAllowGrowY(true);
bp.setSelectable(false);
bp.setAnonymous(true);
bp.setCursor(h);
break;
case r:bp=new qx.ui.basic.Label();
bp.setAllowGrowX(true);
bp.setAllowGrowY(true);
bp.setCursor(h);
bp.addListener(bh,this._onDayClicked,this);
bp.addListener(T,this._onDayDblClicked,this);
break;
case bj:var bq=new qx.ui.layout.Grid();
bp=new qx.ui.container.Composite(bq);

for(var i=0;i<8;i++){bq.setColumnFlex(i,1);
}
for(var i=0;i<7;i++){bq.setRowFlex(i,1);
}var br=this.getChildControl(R);
br.addState(E);
bp.add(br,{column:0,row:0});
this.__cJ=[];

for(var i=0;i<7;i++){br=this.getChildControl(A+i);
bp.add(br,{column:i+1,row:0});
this.__cJ.push(br);
}this.__cK=[];
this.__cL=[];

for(var y=0;y<6;y++){var br=this.getChildControl(U+(y+1));
bp.add(br,{column:0,row:y+1});
this.__cL.push(br);
for(var x=0;x<7;x++){var br=this.getChildControl(B+((y*7)+x));
bp.add(br,{column:x+1,row:y+1});
this.__cK.push(br);
}}this._add(bp);
break;
}return bp||qx.ui.core.Widget.prototype._createChildControlImpl.call(this,bn);
},_applyValue:function(bs,bt){if((bs!=null)&&(this.getShownMonth()!=bs.getMonth()||this.getShownYear()!=bs.getFullYear())){this.showMonth(bs.getMonth(),bs.getFullYear());
}else{var bv=(bs==null)?-1:bs.getDate();

for(var i=0;i<6*7;i++){var bu=this.__cK[i];

if(bu.hasState(f)){if(bu.hasState(l)){bu.removeState(l);
}}else{var bw=parseInt(bu.getValue(),10);

if(bw==bv){bu.addState(l);
}else if(bu.hasState(l)){bu.removeState(l);
}}}}},_onMouseUpDown:function(e){var bx=e.getTarget();

if(bx==this.getChildControl(b)||bx==this.getChildControl(bj)){e.stopPropagation();
return;
}},_onNavButtonClicked:function(by){var bA=this.getShownYear();
var bz=this.getShownMonth();

switch(by.getCurrentTarget()){case this.getChildControl(c):bA--;
break;
case this.getChildControl(j):bz--;

if(bz<0){bz=11;
bA--;
}break;
case this.getChildControl(g):bz++;

if(bz>=12){bz=0;
bA++;
}break;
case this.getChildControl(a):bA++;
break;
}this.showMonth(bz,bA);
},_onDayClicked:function(bB){var bC=bB.getCurrentTarget().dateTime;
this.setValue(new Date(bC));
},_onDayDblClicked:function(){this.execute();
},_onKeyPress:function(bD){var bH=null;
var bF=null;
var bG=null;

if(bD.getModifiers()==0){switch(bD.getKeyIdentifier()){case n:bH=-1;
break;
case S:bH=1;
break;
case W:bH=-7;
break;
case F:bH=7;
break;
case bi:bF=-1;
break;
case be:bF=1;
break;
case m:if(this.getValue()!=null){this.setValue(null);
return true;
}break;
case V:case H:if(this.getValue()!=null){this.execute();
}return;
}}else if(bD.isShiftPressed()){switch(bD.getKeyIdentifier()){case bi:bG=-1;
break;
case be:bG=1;
break;
}}
if(bH!=null||bF!=null||bG!=null){var bE=this.getValue();

if(bE!=null){bE=new Date(bE.getTime());
}
if(bE==null){bE=new Date();
}else{if(bH!=null){bE.setDate(bE.getDate()+bH);
}
if(bF!=null){bE.setMonth(bE.getMonth()+bF);
}
if(bG!=null){bE.setFullYear(bE.getFullYear()+bG);
}}this.setValue(bE);
}},showMonth:function(bI,bJ){if((bI!=null&&bI!=this.getShownMonth())||(bJ!=null&&bJ!=this.getShownYear())){if(bI!=null){this.setShownMonth(bI);
}
if(bJ!=null){this.setShownYear(bJ);
}this._updateDatePane();
}},handleKeyPress:function(e){this._onKeyPress(e);
},_updateDatePane:function(){var ca=qx.ui.control.DateChooser;
var bW=new Date();
var bP=bW.getFullYear();
var bU=bW.getMonth();
var bS=bW.getDate();
var cb=this.getValue();
var ce=(cb==null)?-1:cb.getFullYear();
var cl=(cb==null)?-1:cb.getMonth();
var bX=(cb==null)?-1:cb.getDate();
var bT=this.getShownMonth();
var ci=this.getShownYear();
var bQ=qx.locale.Date.getWeekStart();
var cc=new Date(this.getShownYear(),this.getShownMonth(),1);
var bY=new qx.util.format.DateFormat(ca.MONTH_YEAR_FORMAT);
this.getChildControl(d).setValue(bY.format(cc));
var ck=cc.getDay();
var bV=1+((7-ck)%7);
var cd=new qx.util.format.DateFormat(ca.WEEKDAY_FORMAT);

for(var i=0;i<7;i++){var cf=(i+bQ)%7;
var ch=this.__cJ[i];
cc.setDate(bV+cf);
ch.setValue(cd.format(cc));

if(qx.locale.Date.isWeekend(cf)){ch.addState(q);
}else{ch.removeState(q);
}}cc=new Date(ci,bT,1,12,0,0);
var bL=(7+ck-bQ)%7;
cc.setDate(cc.getDate()-bL);
var cg=new qx.util.format.DateFormat(ca.WEEK_FORMAT);

for(var bK=0;bK<6;bK++){this.__cL[bK].setValue(cg.format(cc));

for(var i=0;i<7;i++){var ch=this.__cK[bK*7+i];
var bO=cc.getFullYear();
var bN=cc.getMonth();
var bR=cc.getDate();
var bM=(ce==bO&&cl==bN&&bX==bR);

if(bM){ch.addState(l);
}else{ch.removeState(l);
}
if(bN!=bT){ch.addState(f);
}else{ch.removeState(f);
}var cj=(bO==bP&&bN==bU&&bR==bS);

if(cj){ch.addState(bg);
}else{ch.removeState(bg);
}ch.setValue(N+bR);
ch.dateTime=cc.getTime();
cc.setDate(cc.getDate()+1);
}}bY.dispose();
cd.dispose();
cg.dispose();
}},destruct:function(){if(qx.core.Environment.get(ba)){qx.locale.Manager.getInstance().removeListener(bd,this._updateDatePane,this);
}this.__cJ=this.__cK=this.__cL=null;
}});
})();
(function(){var m="current-preview",l="execute",k="selected-preview",h="Number",g="preview-pane",f="selector-button",d="colorselector-cancelbutton",c="auto-button",b="colorselector-okbutton",a="mousedown",X="teal",W="maroon",V="qx.ui.control.ColorPopup",U="#666",T="changeValue",S="#333",R="#000",Q="yellow",P="__dl",O="changeGreen",t="colorpopup",u="_applyValue",r="blue",s="changeRed",p="field#",q="#CCC",n="Color Selector",o="changeVisibility",v="recent",w="changeBlue",D="mouseover",B="Cancel",H="#FFF",F="right",K="Open ColorSelector",J="mouseout",y="#999",N="Automatic",M="Basic Colors",L="Preview (Old/New)",x="visible",z="__dm",A="Recent Colors",C="OK",E="field",G="green",I="red";
qx.Class.define(V,{extend:qx.ui.popup.Popup,implement:[qx.ui.form.IColorForm],construct:function(){qx.ui.popup.Popup.call(this);
this.setLayout(new qx.ui.layout.VBox(5));
this._createChildControl(c);
this._createBoxes();
this._createChildControl(g);
this._createChildControl(f);
this.addListener(o,this._onChangeVisibility,this);
},properties:{appearance:{refine:true,init:t},value:{nullable:true,apply:u,event:T},red:{check:h,init:null,nullable:true,event:s},green:{check:h,init:null,nullable:true,event:O},blue:{check:h,init:null,nullable:true,event:w}},members:{__dj:1e5,__dk:null,__dl:null,__dm:null,__dn:v,__do:12,_createChildControlImpl:function(Y,ba){var bb;

switch(Y){case E:bb=new qx.ui.core.Widget;
bb.addListener(a,this._onFieldMouseDown,this);
bb.addListener(D,this._onFieldMouseOver,this);
bb.addListener(J,this._onFieldMouseOut,this);
break;
case c:bb=new qx.ui.form.Button(this.tr(N));
bb.setAllowStretchX(true);
bb.addListener(l,this._onAutomaticBtnExecute,this);
this.add(bb);
break;
case f:bb=new qx.ui.form.Button(this.tr(K));
bb.addListener(l,this._onSelectorButtonExecute,this);
this.add(bb);
break;
case g:bb=new qx.ui.groupbox.GroupBox(this.tr(L));
bb.setLayout(new qx.ui.layout.HBox);
bb.add(this._createChildControl(k,true),{flex:1});
bb.add(this._createChildControl(m,true),{flex:1});
this.add(bb);
break;
case k:bb=new qx.ui.container.Composite(new qx.ui.layout.Basic);
break;
case m:bb=new qx.ui.container.Composite(new qx.ui.layout.Basic);
break;
case b:bb=new qx.ui.form.Button(this.tr(C));
bb.addListener(l,this._onColorSelectorOk,this);
break;
case d:bb=new qx.ui.form.Button(this.tr(B));
bb.addListener(l,this._onColorSelectorCancel,this);
break;
}return bb||qx.ui.popup.Popup.prototype._createChildControlImpl.call(this,Y);
},_createBoxes:function(){this.__dk={};
var bd=this._tables;
var bg,bc,be;
var j=0;

for(var bf in bd){bg=bd[bf];
bc=new qx.ui.groupbox.GroupBox(bg.label);
bc.setLayout(new qx.ui.layout.HBox);
this.__dk[bf]=bc;
this.add(bc);

for(var i=0;i<this.__do;i++){be=this.getChildControl(p+(j++));
be.setBackgroundColor(bg.values[i]||null);
bc.add(be);
}}},_createColorSelector:function(){if(this.__dm){return;
}var bh=new qx.ui.window.Window(this.tr(n));
this.__dl=bh;
bh.setLayout(new qx.ui.layout.VBox(16));
bh.setResizable(false);
bh.moveTo(20,20);
this.__dm=new qx.ui.control.ColorSelector;
bh.add(this.__dm);
var bi=new qx.ui.container.Composite(new qx.ui.layout.HBox(8,F));
bh.add(bi);
var bk=this._createChildControl(d);
var bj=this._createChildControl(b);
bi.add(bk);
bi.add(bj);
},_applyValue:function(bl,bm){if(bl===null){this.setRed(null);
this.setGreen(null);
this.setBlue(null);
}else{var bn=qx.util.ColorUtil.stringToRgb(bl);
this.setRed(bn[0]);
this.setGreen(bn[1]);
this.setBlue(bn[2]);
}this.getChildControl(k).setBackgroundColor(bl);
this._rotatePreviousColors();
},_rotatePreviousColors:function(){if(!this._tables){return;
}var bq=this._tables[this.__dn].values;
var br=this.__dk[this.__dn];

if(!bq){return;
}var bs=this.getValue();

if(!bs){return;
}var bp=bq.indexOf(bs);

if(bp!=-1){qx.lang.Array.removeAt(bq,bp);
}else if(bq.length==this.__do){bq.shift();
}bq.push(bs);
var bo=br.getChildren();

for(var i=0;i<bo.length;i++){bo[i].setBackgroundColor(bq[i]||null);
}},_onFieldMouseDown:function(e){var bt=this.getChildControl(m).getBackgroundColor();
this.setValue(bt);

if(bt){this.hide();
}},_onFieldMouseOver:function(e){this.getChildControl(m).setBackgroundColor(e.getTarget().getBackgroundColor());
},_onFieldMouseOut:function(e){var bx=this.getRed();
var bw=this.getGreen();
var bu=this.getBlue();
var bv=null;

if(bx!==null||bw!==null||bu!==null){var bv=qx.util.ColorUtil.rgbToRgbString([bx,bw,bu]);
}this.getChildControl(m).setBackgroundColor(bv);
},_onAutomaticBtnExecute:function(){this.setValue(null);
this.hide();
},_onSelectorButtonExecute:function(){this._createColorSelector();
this.exclude();
var bA=this.getRed();
var bz=this.getGreen();
var by=this.getBlue();

if(bA===null||bz===null||by===null){bA=255;
bz=255;
by=255;
}this.__dm.setRed(bA);
this.__dm.setGreen(bz);
this.__dm.setBlue(by);
this.__dl.open();
},_onColorSelectorOk:function(){var bB=this.__dm;
this.setValue(qx.util.ColorUtil.rgbToRgbString([bB.getRed(),bB.getGreen(),bB.getBlue()]));
this.__dl.close();
},_onColorSelectorCancel:function(){this.__dl.close();
},_onChangeVisibility:function(e){if(this.getVisibility()==x){var bF=this.getRed();
var bE=this.getGreen();
var bC=this.getBlue();
var bD=null;

if(bF!==null||bE!==null||bC!==null){var bD=qx.util.ColorUtil.rgbToRgbString([bF,bE,bC]);
}this.getChildControl(k).setBackgroundColor(bD);
this.getChildControl(m).setBackgroundColor(bD);
}},_tables:{core:{label:M,values:[R,S,U,y,q,H,I,G,r,Q,X,W]},recent:{label:A,values:[]}}},destruct:function(){this._disposeObjects(P,z);
this._tables=this.__dk=null;
}});
})();
(function(){var l="execute",k="visible",j="excluded",h='name',g='',f="westorelggman/mail.png",d="<strong>",c="westorelggman/dialog-cancel.png",b="pushMessage",a="changeValue",E="westorelggman/indicator_waitanim.gif",D="westorelggman.Email",C="westorelggman/mail32.png",B='EMAIL',A="</strong>.<br>",z="westorelggman/dialog-no.png",y="westorelggman/alarm.png",x="minmax",w="resize",v='subject',s='body',t="westorelggman/document-save.png",q=" senden",r='gray',o=" um ",p=', ',m="Nachricht ",n="disappear",u="saveAndGetDrafts";
qx.Class.define(D,{extend:qx.ui.window.Window,construct:function(){qx.ui.window.Window.call(this);
this.set({modal:true,showMinimize:false,allowMinimize:false,showMaximize:false,allowMaximize:false});
var U=this;
var M=750;
var L=this.__fD;
this.setLayout(new qx.ui.layout.VBox(10));
this.addListener(w,this.center,this);
var i=new qx.ui.basic.Image(C,32,32);
this.__fs=new qx.ui.basic.Label().set({value:d+ElggMan_email_label+A+ElggMan_email_label_descr,rich:true});
var R=this.__ft=new qx.ui.container.Composite(new qx.ui.layout.HBox(20));
R.add(i);
R.add(this.__fs);
this.add(R);
this.__fu=new qx.ui.container.Scroll().set({width:M,height:30});
this.__fv=new qx.ui.basic.Label().set({rich:true,wrap:true,width:M,textColor:r});
this.__fu.add(this.__fv);
this.add(this.__fu);
var P=this.__fw=new qx.ui.container.Composite(new qx.ui.layout.HBox(5));
var J=new qx.ui.basic.Label(ElggMan_email_label_subject);
J.setWidth(50);
P.add(J);
this.__fx=new qx.ui.form.TextField();
this.__fx.setWidth(M);
P.add(this.__fx);
this.add(P);
this.__fy=new westorelggman.HtmlArea(M,L);
this.__fy.addListener(x,this.__fE,this);
this.add(this.__fy);
var V=new qx.ui.form.Button(ElggMan_email_now,f);
var X=new qx.ui.form.Button(ElggMan_email_schedule,y);
var T=new qx.ui.form.Button(ElggMan_cancel,c);
var I=new qx.ui.form.ComboBox();
var H=new qx.ui.form.ListItem(ElggMan_email_newdraft);
I.add(H);
elggmanMainContainer.rpc.callAsync(function(Y,ba,bb){if(ba!=null){elggmanMainContainer.alert("Async("+bb+") exception: "+ba);
}else{var bc=Y.length;

if(bc){for(i=0;i<bc;i++){H=new qx.ui.form.ListItem(Y[i][h]);
I.add(H);
subjects[Y[i][h]]=Y[i][v];
drafts[Y[i][h]]=Y[i][s];
}}}},u,null);
I.setValue(I.getChildrenContainer().getSelectables()[0].getLabel());
var F=new qx.ui.form.Button(ElggMan_email_save_as,t);
var N=new qx.ui.form.Button(g,z);
var G=this.__fz=new qx.ui.groupbox.GroupBox(ElggMan_email_label);
G.setLayout(new qx.ui.layout.HBox(5));
var O=new qx.ui.container.Composite(new qx.ui.layout.HBox(5));
O.add(V);
O.add(T);
G.add(O);
var Q=new qx.ui.groupbox.GroupBox(ElggMan_email_draft);
Q.setLayout(new qx.ui.layout.HBox(5));
var K=new qx.ui.container.Composite(new qx.ui.layout.HBox(3));
K.add(I);
K.add(F);
K.add(N);
Q.add(K);
var W=new qx.ui.container.Composite(new qx.ui.layout.HBox(10));
W.add(G);
var S=new qx.ui.basic.Label().set({value:ElggMan_email_help,rich:true,width:M});
this.add(W);
this.add(S);
this.__fA=new westorelggman.Scheduler();
V.addListener(l,function(e){V.setEnabled(false);
V.setIcon(E);
elggmanMainContainer.rpc.callAsync(function(bd,be,bf){if(be!=null){elggmanMainContainer.alert("Async("+bf+") exception: "+be);
}else{if(bd.err)elggmanMainContainer.alert(bd.err);
else if(bd.txt)elggmanMainContainer.alert(bd.txt);
}U.close();
V.setEnabled(true);
V.setIcon(f);
},b,B,this.getRecipientIds(),this.__fy.getHtml(),this.__fx.getValue(),this.__fB);
},this);
X.addListener(l,function(e){this.__fA.open();
},this);
this.__fA.addListener(n,function(e){if(this.__fA.getDate()){V.setLabel(m+this.__fA.getDate()+o+this.__fA.getTime()+q);
this.__fB=this.__fA.getISODateTime();
}else{V.setLabel(ElggMan_email_now);
this.__fB=null;
}},this);
T.addListener(l,function(e){this.close();
},this);
I.addListener(a,function(e){},this);
F.addListener(l,function(e){},this);
N.addListener(l,function(e){},this);
},members:{__fB:null,__fA:null,__fC:false,__fD:150,__fE:function(){if(!this.__fC){this.__ft.setVisibility(j);
this.__fw.setVisibility(j);
this.__fu.setVisibility(j);
this.__fz.setVisibility(j);
this.__fy.getHtmlArea().setHeight(this.getInnerSize().height-110);
this.__fC=true;
}else{this.__fy.getHtmlArea().setHeight(this.__fD);
this.__fw.setVisibility(k);
this.__ft.setVisibility(k);
this.__fu.setVisibility(k);
this.__fz.setVisibility(k);
this.__fC=false;
}},setRecipients:function(bg){this.__fF=bg;
var bi=this.__fF.length;
var bh=g;

for(var i=0;i<bi;i++){bh=bh+this.__fF[i][1];

if(this.__fF[(i+1)]&&this.__fF[(i+1)][1])bh=bh+p;
}this.__fv.setValue(bh);
},getRecipientIds:function(){var bk=this.__fF.length;
var bj=[];

for(var i=0;i<bk;i++){bj.push(this.__fF[i][0]);
}return (bj);
},setHtmlContent:function(bl){this.__fy.setHtml(bl);
},setSubject:function(bm){this.__fx.setValue(bm);
}}});
})();
(function(){var k="qx.event.type.Data",j="Boolean",i="qx.event.type.Event",h="mousedown",g="DOMNodeRemoved",f="String",d="none",c="engine.name",b="appear",a="mouseup",bh="losecapture",bg="display",bf="xhtml",be="_applyUseUndoRedo",bd="focusOut",bc="_applyMessengerMode",bb="url(",ba=")",Y="InsertParagraphOnLinebreak",X="gecko",r="repeat",s="undoRedoState",p="div",q="messengerContent",n="Integer",o="__cW",l="NativeContextMenu",m="focused",v="Function",w="Please use the method 'qx.dom.Node.isBlockNode' instead.",E="_applyInsertParagraphOnLinebreak",C="PostProcess",M="_applyInsertLinebreakOnCtrlEnter",H="ContentType",T="px",R="set",y="DefaultFontSize",W="cursorContext",V="htmlarea",U="ready",x="loadingError",A="__cX",B="MessengerMode",D="_applyDefaultFontSize",F="UseUndoRedo",I="_applyDefaultFontFamily",O="_applyContentType",S="qx.ui.embed.HtmlArea",t="mshtml",u="Verdana",z="block",L="DefaultFontFamily",K="contextmenu",J="readyAfterInvalid",Q="InsertLinebreakOnCtrlEnter",P="qx/static/blank.gif",G="_applyPostProcess",N="absolute";
qx.Class.define(S,{extend:qx.ui.core.Widget,construct:function(bi,bj,bk){this.__cU={};
qx.ui.core.Widget.call(this);
this._setLayout(new qx.ui.layout.Grow);
this.__da();
this.__cV={content:bi,styleInfo:bj,source:bk};
qx.event.Registration.addListener(document.body,h,this.block,this,true);
qx.event.Registration.addListener(document.body,a,this.release,this,true);
qx.event.Registration.addListener(document.body,bh,this.release,this,true);
},events:{"loadingError":k,"messengerContent":k,"cursorContext":k,"ready":i,"readyAfterInvalid":i,"focused":i,"focusOut":i,"contextmenu":k,"undoRedoState":k},statics:{isBlockNode:function(bl){var bm=qx.ui.embed.HtmlArea.isBlockNode;
var bn=w;
qx.log.Logger.deprecatedMethodWarning(bm,bn);
return qx.dom.Node.isBlockNode(bl);
},isParagraphParent:function(bo){return qx.bom.htmlarea.HtmlArea.isParagraphParent(bo);
}},properties:{contentType:{check:f,init:bf,apply:O},messengerMode:{check:j,init:false,apply:bc},insertParagraphOnLinebreak:{check:j,init:true,apply:E},insertLinebreakOnCtrlEnter:{check:j,init:true,apply:M},postProcess:{check:v,nullable:true,init:null,apply:G},useUndoRedo:{check:j,init:true,apply:be},appearance:{refine:true,init:V},defaultFontFamily:{check:f,init:u,apply:I},defaultFontSize:{check:n,init:4,apply:D},focusable:{refine:true,init:true}},members:{__cW:null,__cU:null,__cX:null,__cV:null,__cY:null,_initBlockerElement:function(){if(!this.__cX){this.__cX=this._createBlockerElement();
}},_applyContentType:function(bp,bq){if(this.__cW!=null){this.__cW.setContentType(bp);
}else{this.__cU[H]=bp;
}},_applyMessengerMode:function(br,bs){if(this.__cW!=null){this.__cW.setMessengerMode(br);
}else{this.__cU[B]=br;
}},_applyInsertParagraphOnLinebreak:function(bt,bu){if(this.__cW!=null){this.__cW.setInsertParagraphOnLinebreak(bt);
}else{this.__cU[Y]=bt;
}},_applyInsertLinebreakOnCtrlEnter:function(bv,bw){if(this.__cW!=null){this.__cW.setInsertLinebreakOnCtrlEnter(bv);
}else{this.__cU[Q]=bv;
}},_applyPostProcess:function(bx,by){if(this.__cW!=null){this.__cW.setPostProcess(bx);
}else{this.__cU[C]=bx;
}},_applyUseUndoRedo:function(bz,bA){if(this.__cW!=null){this.__cW.setUseUndoRedo(bz);
}else{this.__cU[F]=bz;
}},_applyDefaultFontFamily:function(bB,bC){if(this.__cW!=null){this.__cW.setDefaultFontFamily(bB);
}else{this.__cU[L]=bB;
}},_applyDefaultFontSize:function(bD,bE){if(this.__cW!=null){this.__cW.setDefaultFontSize(bD);
}else{this.__cU[y]=bD;
}},_applyNativeContextMenu:function(bF,bG){if(this.__cW!=null){this.__cW.setNativeContextMenu(bF);
}else{this.__cU[l]=bF;
}},_createBlockerElement:function(){var bH=new qx.html.Element(p);
bH.setStyles({zIndex:20,position:N,display:d});
if((qx.core.Environment.get(c)==t)){bH.setStyles({backgroundImage:bb+qx.util.ResourceManager.getInstance().toUri(P)+ba,backgroundRepeat:r});
}return bH;
},__da:function(){this.addListenerOnce(b,this.__db);
},__db:function(){var bI=this.getContentElement().getDomElement();
this.__cW=new qx.bom.htmlarea.HtmlArea(bI,this.__cV.content,this.__cV.styleInfo,this.__cV.source);
this.__dc();
this.__dd();

if((qx.core.Environment.get(c)==X)){this.__dg();
}this.addListener(b,this.forceEditable);
},__dc:function(){for(var bJ in this.__cU){this.__cW[R+bJ](this.__cU[bJ]);
}},__dd:function(){this.__cW.addListener(U,this.__de,this);
this.__cW.addListener(J,this.__de,this);
this.__cW.addListener(m,this.__de,this);
this.__cW.addListener(bd,this.__de,this);
this.__cW.addListener(x,this.__df,this);
this.__cW.addListener(W,this.__df,this);
this.__cW.addListener(K,this.__df,this);
this.__cW.addListener(s,this.__df,this);
this.__cW.addListener(q,this.__df,this);
},__de:function(e){var bK=e.clone();
this.fireEvent(bK.getType());
},__df:function(e){var bL=e.clone();
this.fireDataEvent(bL.getType(),e.getData());
},__dg:function(){this.__cY=qx.lang.Function.bind(this.__dh,this);
var bM=this.getContainerElement().getDomElement();
qx.bom.Event.addNativeListener(bM,g,this.__cY);
},__dh:qx.event.GlobalError.observeMethod(function(e){if(this.__cW&&!this.__cW.isDisposed()){this.__cW.invalidateEditor();
}}),renderLayout:function(bN,top,bO,bP){qx.ui.core.Widget.prototype.renderLayout.call(this,bN,top,bO,bP);
var bR=T;
var bQ=this.getInsets();

if(!this.__cX){this._initBlockerElement();
}this.__cX.setStyles({left:bQ.left+bR,top:bQ.top+bR,width:(bO-bQ.left-bQ.right)+bR,height:(bP-bQ.top-bQ.bottom)+bR});
},getIframeObject:function(){return this.__cW!=null?this.__cW.getIframeObject():null;
},getCommandManager:function(){return this.__cW!=null?this.__cW.getCommandManager():null;
},setValue:function(bS){if(this.__cW!=null){this.__cW.setValue(bS);
}else{this.__cV.content=bS;
}},getValue:function(){if(this.__cW!=null){return this.__cW.getValue();
}else{return this.__cV.content;
}},getComputedValue:function(bT){return this.__cW!=null?this.__cW.getHtml(bT):null;
},getCompleteHtml:function(){return this.__cW!=null?this.__cW.getCompleteHtml():null;
},getContentDocument:function(){return this.__cW!=null?this.__cW.getContentDocument():null;
},getContentBody:function(){return this.__cW!=null?this.__cW.getContentBody():null;
},getContentWindow:function(){return this.__cW!=null?this.__cW.getContentWindow():null;
},getWords:function(bU){return this.__cW!=null?this.__cW.getWords(bU):null;
},getWordsWithElement:function(){return this.__cW!=null?this.__cW.getWordsWithElement():null;
},getTextNodes:function(){return this.__cW!=null?this.__cW.getTextNodes():null;
},isReady:function(){return this.__cW!=null?this.__cW.isReady():false;
},forceEditable:function(){if(this.__cW!=null){this.__cW.forceEditable();
}},isLoaded:function(){return this.__cW!=null?this.__cW.isLoaded():false;
},setEditable:function(bV){if(this.__cW!=null){this.__cW.setEditable(bV);
}},getEditable:function(){return this.__cW!=null?this.__cW.getEditable():false;
},isEditable:function(){return this.__cW!=null?this.__cW.isEditable():false;
},insertHtml:function(bW){return this.__cW!=null?this.__cW.insertHtml(bW):false;
},removeFormat:function(){return this.__cW!=null?this.__cW.removeFormat():false;
},setBold:function(){return this.__cW!=null?this.__cW.setBold():false;
},setItalic:function(){return this.__cW!=null?this.__cW.setItalic():false;
},setUnderline:function(){return this.__cW!=null?this.__cW.setUnderline():false;
},setStrikeThrough:function(){return this.__cW!=null?this.__cW.setStrikeThrough():false;
},setFontSize:function(bX){return this.__cW!=null?this.__cW.setFontSize(bX):false;
},setFontFamily:function(bY){return this.__cW!=null?this.__cW.setFontFamily(bY):false;
},setTextColor:function(ca){return this.__cW!=null?this.__cW.setTextColor(ca):false;
},setTextBackgroundColor:function(cb){return this.__cW!=null?this.__cW.setTextBackgroundColor(cb):false;
},setJustifyLeft:function(){return this.__cW!=null?this.__cW.setJustifyLeft():false;
},setJustifyCenter:function(){return this.__cW!=null?this.__cW.setJustifyCenter():false;
},setJustifyRight:function(){return this.__cW!=null?this.__cW.setJustifyRight():false;
},setJustifyFull:function(){return this.__cW!=null?this.__cW.setJustifyFull():false;
},insertIndent:function(){return this.__cW!=null?this.__cW.insertIndent():false;
},insertOutdent:function(){return this.__cW!=null?this.__cW.insertOutdent():false;
},insertOrderedList:function(){return this.__cW!=null?this.__cW.insertOrderedList():false;
},insertUnorderedList:function(){return this.__cW!=null?this.__cW.insertUnorderedList():false;
},insertHorizontalRuler:function(){return this.__cW!=null?this.__cW.insertHorizontalRuler():false;
},insertImage:function(cc){return this.__cW!=null?this.__cW.insertImage(cc):false;
},insertHyperLink:function(cd){return this.__cW!=null?this.__cW.insertHyperLink(cd):false;
},removeBackgroundColor:function(){return this.__cW!=null?this.__cW.removeBackgroundColor():false;
},setBackgroundColor:function(ce){return this.__cW!=null?this.__cW.setBackgroundColor(ce):false;
},removeBackgroundImage:function(){return this.__cW!=null?this.__cW.removeBackgroundImage():false;
},setBackgroundImage:function(cf,cg,ch){return this.__cW!=null?this.__cW.setBackgroundImage(cf,cg,ch):false;
},selectAll:function(){return this.__cW!=null?this.__cW.selectAll():false;
},undo:function(){return this.__cW!=null?this.__cW.undo():false;
},redo:function(){return this.__cW!=null?this.__cW.redo():false;
},resetHtml:function(){if(this.__cW!=null){this.__cW.resetHtml();
}},getHtml:function(ci){return this.__cW!=null?this.__cW.getHtml(ci):null;
},containsOnlyPlaceholder:function(){return this.__cW!=null?this.__cW.containsOnlyPlaceHolder():false;
},getContextInformation:function(){return this.__cW!=null?this.__cW.getContextInformation():null;
},getSelection:function(){return this.__cW!=null?this.__cW.getSelection():null;
},getSelectedText:function(){return this.__cW!=null?this.__cW.getSelectedText():null;
},getSelectedHtml:function(){return this.__cW!=null?this.__cW.getSelectedHtml():null;
},clearSelection:function(){if(this.__cW!=null){this.__cW.clearSelection();
}},getRange:function(){return this.__cW.getRange();
},saveRange:function(){this.__cW.saveRange();
},getSavedRange:function(){return this.__cW.getSavedRange();
},resetSavedRange:function(){this.__cW.resetSavedRange();
},getFocusNode:function(){return this.__cW!=null?this.__cW.getFocusNode():null;
},block:function(){if(!this.__cX){this._initBlockerElement();
}
if(!this.getContainerElement().hasChild(this.__cX)){this.getContainerElement().add(this.__cX);
}this.__cX.setStyle(bg,z);
},release:function(){if(this.__cX){this.__cX.setStyle(bg,d);
}},focus:function(){qx.ui.core.Widget.prototype.focus.call(this);
this.__di();
},tabFocus:function(){qx.ui.core.Widget.prototype.tabFocus.call(this);
this.__di();
},__di:function(){if(this.__cW!=null){qx.event.Timer.once(function(){this.__cW.focusContent();
},this,0);
}}},destruct:function(){this.__cU=this.__cV=null;
qx.event.Registration.removeListener(document.body,h,this.block,this,true);
qx.event.Registration.removeListener(document.body,a,this.release,this,true);
qx.event.Registration.removeListener(document.body,bh,this.release,this,true);
var cj=this.getContainerElement().getDomElement();

if(cj){qx.bom.Event.removeNativeListener(cj,g,this.__cY);
}this._disposeObjects(A,o);
}});
})();
(function(){var o="execute",n="yyyy-MM-dd",m="00:00",l="westorelggman/dialog-cancel.png",k="Datum/Uhrzeit speichern",j="dd.MM.yyyy",i="westorelggman.Scheduler",h="Uhrzeit:",g="Geplanten Termin eingeben",f="__cQ",c=" ",e="westorelggman/alarm.png",d="Abbrechen",b="Datum:",a=":00";
qx.Class.define(i,{extend:westorelggman.elements.Window,construct:function(){westorelggman.elements.Window.call(this);
this.setCaption(g);
this.setLayout(new qx.ui.layout.VBox(20));
this.__bW();
},properties:{},members:{__cO:j,__cP:n,__cQ:null,__cR:null,__bW:function(){var s=new qx.ui.basic.Label(b);
var u=new qx.ui.form.DateField();
this.__cQ=new qx.util.format.DateFormat(this.__cO);
this.__cR=new qx.util.format.DateFormat(this.__cP);
u.setValue(new Date());
u.setDateFormat(this.__cQ);
var p=new qx.ui.container.Composite(new qx.ui.layout.HBox(5));
lbl2=new qx.ui.basic.Label(h);
var t=new qx.ui.form.TextField(m);
t.setWidth(45);
p.add(s);
p.add(u);
p.add(lbl2);
p.add(t);
var v=new qx.ui.form.Button(k,e);
var r=new qx.ui.form.Button(d,l);
r.addListener(o,function(){this.__cS=null;
this.__cT=null;
this.close();
},this);
v.addListener(o,function(){try{this.__cS=u.getValue();
this.__cT=t.getValue();
this.close();
}catch(w){alert("Datum nicht korrekt eingegeben.");
}},this);
var q=new qx.ui.container.Composite(new qx.ui.layout.HBox(20));
q.add(v);
q.add(r);
this.add(p);
this.add(q);
},getDate:function(){return (this.__cQ.format(this.__cS));
},getTime:function(){return (this.__cT);
},getISODateTime:function(){var x=this.__cR.format(this.__cS)+c+this.getTime()+a;
return (x);
},getDateObject:function(){}},destruct:function(){this._disposeObjects(f);
}});
})();
(function(){var dS="engine.name",dR="",dQ="mshtml",dP="gecko",dO="webkit",dN="opera",dM="qx.event.type.Data",dL="id",dK="qx.event.type.Event",dJ=" ",cu="Boolean",ct="__elementToFocus__",cs="enter",cr='"',cq="left",cp="text-align",co="right",cn="qx.bom.htmlarea.HtmlArea.debug",cl="engine.version",ck="br",ea="inserthtml",eb="italic",dX="body",dY="underline",dV="old_id",dW="b",dT="loadingError",dU="contextmenu",ec="pageup",ed="backgroundcolor",dr="end",dq="div",dt='On',ds="redo",dv="i",du="backspace",dx="bold",dw="mouseup",dp="y",dn="style",o="backgroundimage",p="100%",q='</head>',r='<head>',t="k",u=":",v='redo',w='Off',x='">',y="down",es="font-family",er="g",eq="keypress",ep="fontsize",ew="undo",ev="text-decoration",eu="pagedown",et="justify",ez="center",ey="p",br='</style>',bs="u",bp="focus",bq="control",bv="click",bw='<style type="text/css">',bt="up",bu="blur",bn="font-size",bo="None",S="'",R="delete",U="_moz_dirty",T=">",O='</body></html>',N="line-through",Q="String",P="z",M=";",L="fontfamily",bC="keydown",bD="keyup",bE="focusout",bF="-",by='</span>',bz="backgroundColor",bA="li",bB='undo',bG="<br class='webkit-block-placeholder' />",bH="textbackgroundcolor",bg="Function",bf="fontSize",be="textcolor",bd="home",bc="<",bb="focused",ba="fontFamily",Y="load",bk='<font ',bj='id="__elementToFocus__"',bI="setUnderline",bJ="backgroundPosition",bK="<!--",bL=' size="',bM='/www.w3.org/1999/xhtml" xml:lang="en" lang="en">',bN="'>",bO='underline',bP='bold',bQ="&copy;",bR="ul",cC="cursorContext",cB="readyAfterInvalid",cA="styleWithCSS",cz="span",cG=" />",cF="setBold",cE="P",cD="<P>&nbsp;</P>",cK="</",cJ="qx/static/blank.html",di="&gt;",dj='="',dg="paddingLeft",dh="X",de="inserthorizontalrule",df='<p>',dc='</font>',dd="#",dk="backgroundRepeat",dl="insertimage",dB="a",dA="&amp;",dD="removeformat",dC="marginLeft",dF="ready",dE="<p>&nbsp;</p>",dH='DOCTYPE html PUBLIC "-/',dG="browser.version",dz=" html, body {overflow-x: visible; } ",dy='<body>',ek="insertorderedlist",em='body { font-size:100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; background-color:transparent; overflow:visible; background-image:none; margin:0px; padding:5px; } ',en="hideFocus",eo="none",eg='/DTD XHTML 1.0 Transitional/',eh='<html xmlns="http:/',ei="S",ej="outline",ee="setItalic",ef="font-style",n="marginBottom",m="xhtml",l="focusOut",k="justifyleft",h='</p>',g="paddingTop",f="Please use the method 'qx.dom.Node.isBlockNode' instead.",d='<title></title><meta http-equiv="Content-type" content="text/html; charset=UTF-8" />',c="Control",b='<span style="font-family:',B='/W3C/',C="placeholder",z='size',A="backgroundImage",F="marginTop",G="> ",D=" { ",E="font-weight",I="LI",J='italic',cO='<!',cI="\ufeff",cV="&quot;",cR="marginRight",cx="STYLE",cv="justifyfull",W="inserthyperlink",cy="<br />",bi='html { margin:0px; padding:0px; } ',bh="<br>",cc='/EN" "http:/',cd="justifycenter",ce="<br /><div id='placeholder'></div>",cf="useCSS",cg="object",ch="strikethrough",ci="text/html",cj="true",bY="1.9",ca='',cw=' style="',cU="indent",cT="messengerContent",cS="Integer",da="insertunorderedlist",cY="Text",cX="&lt;",cW='<br _moz_editor_bogus_node="TRUE" _moz_dirty=""/>',cQ='<br/><div class="placeholder"></div>',cP="selectall",H="transparent",bm=" SCRIPT STYLE DIV SPAN TR TD TBODY TABLE EM STRONG FONT A P B I U STRIKE H1 H2 H3 H4 H5 H6 ",bl="justifyright",cH='/www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',bx="ol",cN="//text()[string-length(normalize-space(.))>0]",cM="outdent",cL="about:blank",V="<body style='",db="qx.bom.htmlarea.HtmlArea",K="paddingBottom",X="Verdana",bS="$",bT="-->",bU=" }",bV="__dp",bW="paddingRight",bX='html { width:100%; height:100%; margin:0px; padding:0px; overflow-y:auto; overflow-x:auto; } ',dm="Off",cb='p { margin:0px; padding:0px; }',dI='body { font-size: 100.01%; font-family:Verdana, Geneva, Arial, Helvetica, sans-serif; width:100%; height:100%; background-color:transparent; overflow:auto; background-image:none; margin:0px; padding:5px; } ';
qx.Class.define(db,{extend:qx.core.Object,construct:function(eA,eB,eC,eD){qx.core.Object.call(this);
var eF=eD||qx.util.ResourceManager.getInstance().toUri(cJ);
this.__ez(eA);
this.__eA();
this._createAndAddIframe(eF);
this._addIframeLoadListener();
this.__ee=qx.bom.htmlarea.HtmlArea.__eg(eC);
if(qx.lang.Type.isString(eB)){this.__ef=eB;
}if((qx.core.Environment.get(dS)==dN)){var eE=qx.dom.Node.getWindow(eA);
var eG=qx.event.Registration.getManager(eE).getHandler(qx.event.handler.Keyboard);
eG._keyCodeToIdentifierMap[35]=dd;
eG._keyCodeToIdentifierMap[45]=bF;
eG._keyCodeToIdentifierMap[112]=cE;
eG._keyCodeToIdentifierMap[115]=ei;
eG._keyCodeToIdentifierMap[120]=dh;
}this.__dp=this.__eN();
},events:{"load":dK,"loadingError":dM,"messengerContent":dM,"cursorContext":dM,"ready":dK,"readyAfterInvalid":dK,"focused":dK,"focusOut":dK,"contextmenu":dM,"undoRedoState":dM},statics:{simpleLinebreak:bh,EMPTY_DIV:"<div></div>",GetWordsRegExp:/([^\u0000-\u0040\u005b-\u005f\u007b-\u007f]|['])+/g,CleanupWordsRegExp:/[\u0000-\u0040]/gi,hotkeyInfo:{bold:{method:cF},italic:{method:ee},underline:{method:bI},undo:{method:ew},redo:{method:ds}},__eg:function(eH){if(eH==null||eH==dR){return dR;
}else if(typeof eH==cg){var eI=dR;

for(var i in eH){eI+=i+D+eH[i]+bU;
}return eI;
}else{return eH;
}},__eh:function(eJ){var eK={};
var a=eJ.split(M);
var i;

for(i=0;i<a.length;i++){var eL=a[i],eM=eL.indexOf(u);

if(eM===-1){continue;
}var name=qx.lang.String.trim(eL.substring(0,eM));
var eN=qx.lang.String.trim(eL.substring(eM+1,eL.length));

if(name&&eN){eK[name]=eN;
}}return eK;
},__ei:function(eO,eP,eQ,eR){var eW=[];

switch(eO.nodeType){case 1:case 11:var i;
var eU=eO.tagName.toLowerCase();
var eY={};
var eS={};
var closed=(!(eO.hasChildNodes()||qx.bom.htmlarea.HtmlArea.__ej(eO)));

if(eP){if((qx.core.Environment.get(dS)==dQ)){if(eU==dq&&eO.className&&eO.className==C){for(i=eO.firstChild;i;i=i.nextSibling){eW.push(qx.bom.htmlarea.HtmlArea.__ei(i,true,eQ,eR));
}return eW.join(dR);
}}var eX=eO.attributes;
var eV=eX.length;
var a;

if((qx.core.Environment.get(dS)==dP)){if(eU==cz&&eV==1&&eX[0].name==U&&eO.childNodes.length==0){return dR;
}}
for(i=0;i<eV;i++){a=eX[i];
if(!a.specified){continue;
}var name=qx.dom.Node.getName(a);
var fa=a.nodeValue;
if(/(_moz|contenteditable)/.test(name)){continue;
}
if(name!=dn){if(qx.core.Environment.get(dS)==dQ){if(name==dL&&eO.getAttribute(dV)){fa=eO.getAttribute(dV);
}else if(!isNaN(fa)){fa=eO.getAttribute(name);
}else{fa=a.nodeValue;
}}else{fa=a.nodeValue;
}}else{fa=eO.style.cssText;
}
if(/(_moz|^$)/.test(fa)){continue;
}if(name==dV){continue;
}if(!fa){continue;
}if(name==dL&&fa==ct){continue;
}if(name.charAt(0)===bS){continue;
}eY[name]=fa;
}if(eY.style!==undefined){eS=qx.bom.htmlarea.HtmlArea.__eh(eY.style);
delete eY.style;
}if(eR){var eT={domElement:eO,tag:eU,attributes:eY,styles:eS};
eR(eT);
eT.domElement=null;
eU=eT.tag;
}if(eU){eW.push(bc,eU);
for(var name in eY){var fa=eY[name];
eW.push(dJ,name,dj,fa.toString().replace(new RegExp(cr,er),S),cr);
}if(!qx.lang.Object.isEmpty(eS)){eW.push(cw);

for(var name in eS){var fa=eS[name];
eW.push(name,u,fa.toString().replace(new RegExp(cr,er),S),M);
}eW.push(cr);
}eW.push(closed?cG:T);
}}for(i=eO.firstChild;i;i=i.nextSibling){eW.push(qx.bom.htmlarea.HtmlArea.__ei(i,true,eQ,eR));
}if(eP&&!closed&&eU){eW.push(cK,eU,T);
}break;
case 3:eW.push(eQ?eO.data:qx.bom.htmlarea.HtmlArea.__ek(eO.data));
break;
case 8:eW.push(bK,eO.data,bT);
break;
}return eW.join(dR);
},closingTags:bm,__ej:function(fb){return (qx.bom.htmlarea.HtmlArea.closingTags.indexOf(dJ+fb.tagName+dJ)!=-1);
},__ek:function(s){s=s.replace(/&/ig,dA);
s=s.replace(/</ig,cX);
s=s.replace(/>/ig,di);
s=s.replace(/\x22/ig,cV);
s=s.replace(/\xA9/ig,bQ);
return s;
},isBlockNode:function(fc){var fd=qx.bom.htmlarea.HtmlArea.isBlockNode;
var fe=f;
qx.log.Logger.deprecatedMethodWarning(fd,fe);
return qx.dom.Node.isBlockNode(fc);
},isParagraphParent:function(ff){if(!qx.dom.Node.isElement(ff)){return false;
}ff=qx.dom.Node.getName(ff);
return /^(body|td|th|caption|fieldset|div)$/.test(ff);
},isHeadlineNode:function(fg){if(!qx.dom.Node.isElement(fg)){return false;
}var fh=qx.dom.Node.getName(fg);
return /^h[1-6]$/.test(fh);
}},properties:{contentType:{check:Q,init:m},messengerMode:{check:cu,init:false},insertParagraphOnLinebreak:{check:cu,init:true},insertLinebreakOnCtrlEnter:{check:cu,init:true},postProcess:{check:bg,nullable:true,init:null},useUndoRedo:{check:cu,init:true},nativeContextMenu:{check:cu,init:false},defaultFontFamily:{check:Q,init:X},defaultFontSize:{check:cS,init:4}},members:{__el:null,__em:false,__en:false,__eo:false,__ep:false,__eq:false,__dp:null,__er:null,__es:null,__et:null,__eu:null,__ee:null,__ev:null,__ew:null,__ex:false,__ey:false,__ez:function(fi){if(qx.dom.Node.isElement(fi)&&qx.dom.Node.isNodeName(fi,dq)){this.__el=fi;
}},_createAndAddIframe:function(fj){this.__eu=qx.bom.Iframe.create();
qx.bom.Iframe.setSource(this.__eu,fj);
if((qx.core.Environment.get(dS)==dQ)){qx.bom.element.Attribute.set(this.__eu,en,cj);
}else{qx.bom.element.Style.set(this.__eu,ej,eo);
}qx.bom.element.Style.setStyles(this.__eu,{width:p,height:p});
qx.dom.Element.insertBegin(this.__eu,this.__el);
},_getIframeDocument:function(){return qx.bom.Iframe.getDocument(this.__eu);
},_getIframeWindow:function(){return qx.bom.Iframe.getWindow(this.__eu);
},_addIframeLoadListener:function(){qx.event.Registration.addListener(this.__eu,Y,this._loaded,this);
},__eA:function(){this.__ev={"xhtml":{doctype:cO+dH+B+eg+cc+cH,html:eh+bM,meta:d,style:qx.core.Environment.select(dS,{"mshtml":bi+dI,"default":bX+em}),contentStyle:cb,body:dy,footer:O}};
},__ef:dR,getIframeObject:function(){return this.__eu;
},getCommandManager:function(){return this.__dp;
},setValue:function(fk){if(qx.lang.Type.isString(fk)){this.__ef=fk;
var fl=this._getIframeDocument();

if(fl&&fl.body){fl.body.innerHTML=this.__eB(fk);
}}},__eB:function(fm){var fp=dR;

if((qx.core.Environment.get(dS)==dP)){if(qx.core.Environment.get(dG)<=2){fp+=cW;
}}var fq=fm.length==0?cI:dR;
var fo=qx.core.Environment.get(dS)==dP||qx.core.Environment.get(dS)==dO?bj:ca;
var fn=df+b+this.getDefaultFontFamily()+x+bk+fo+bL+this.getDefaultFontSize()+x+fp+fm+fq+dc+by+h;
return fn;
},getValue:function(){return this.__ef;
},getComputedValue:function(fr){return this.getHtml(fr);
},getCompleteHtml:function(){var ft=this.__ev[this.getContentType()];
var fs=ft.html+r+ft.meta+bw+ft.contentStyle+br+q;
fs+=V+this.__eC()+bN;
fs+=this.getHtml()+O;
return fs;
},__eC:function(){var fw=[bz,A,dk,bJ,ba,bf,F,n,dC,cR,g,K,dg,bW];
var fv=qx.bom.element.Style;
var fu=this.getContentBody();
var fz={};
var fy,fA;
var fx=qx.core.Environment.get(dS)==dQ?2:1;

for(var i=0,j=fw.length;i<j;i++){fy=fw[i];
fA=fv.get(fu,fy,fx);

if(fA!==undefined&&fA!=dR){fz[fy]=fA;
}}return qx.bom.element.Style.compile(fz);
},getContentDocument:function(){if(this.__em){return this._getIframeDocument();
}},getContentBody:function(){if(this.__em){return this._getIframeDocument().body;
}},getContentWindow:function(){if(this.__em){return this._getIframeWindow();
}},getWords:function(fB){if(!fB){fB=this.getContentBody();
}
if(!fB){return [];
}var fD=fB.cloneNode(true);
var fF=fD.innerHTML;
fF=fF.replace(/>/gi,G);
fF=fF.replace(/\n/gi,dJ);
fF=fF.replace(/<!--.*-->/gi,dR);
fD.innerHTML=fF;
var fC=qx.core.Environment.get(dS)==dQ||qx.core.Environment.get(dS)==dN?fD.innerText:fD.textContent;
var fE=fC.match(qx.bom.htmlarea.HtmlArea.GetWordsRegExp);
return !fE?[]:fE;
},getWordsWithElement:function(){var fH=this.getTextNodes();
var fL={};
var i,j,fM,fI,fG;

for(var i=0,fK=fH.length;i<fK;++i){fI=fH[i];
fM=fI.nodeValue.split(dJ);

for(var j=0,fJ=fM.length;j<fJ;++j){fG=this._cleanupWord(fM[j]);

if(fG!=null&&fG.length>1){if(!fL[fG]){fL[fG]=[];
}fL[fG].push(fI);
}}}return fL;
},_cleanupWord:function(fN){if(!fN){return null;
}return fN.replace(qx.bom.htmlarea.HtmlArea.CleanupWordsRegExp,dR);
},getTextNodes:function(){return this._fetchTextNodes(this.getContentBody());
},_fetchTextNodes:function(fO){var fQ=[];
var fP;
if(fO.hasChildNodes){for(var i=0;i<fO.childNodes.length;i++){fP=this._fetchTextNodes(fO.childNodes[i]);
qx.lang.Array.append(fQ,fP);
}}if(fO.nodeType==3){if(fO.nodeValue.length>1){fQ.push(fO);
}}return fQ;
},__eD:0,__eE:function(){var fR=this._getIframeDocument();
if(!fR){this.__eD++;

if(this.__eD>5){this.error('cant load HtmlArea. Document is not available. '+fR);
this.fireDataEvent(dT);
}else{qx.event.Timer.once(function(){this.__eE();
},this,0);
}}else{this.__eD=0;
this._onDocumentIsReady();
}},_loaded:function(e){if(this.__eo){return;
}
if(this.__en){this.__eF();
return;
}if((qx.core.Environment.get(dS)==dQ)){this.__eE();
}else{this._onDocumentIsReady();
}},isReady:function(){return this.__em;
},_onDocumentIsReady:function(){var fS=new qx.bom.htmlarea.manager.Command(this);

if(this.getUseUndoRedo()){fS=new qx.bom.htmlarea.manager.UndoRedo(fS,this);
}this.__eo=true;
if((qx.core.Environment.get(dS)==dQ)){this.setEditable(true);
}this.__eI();

if(!(qx.core.Environment.get(dS)==dN)){this.__eJ();
}if(!(qx.core.Environment.get(dS)==dQ)){this.setEditable(true);
}this.__em=true;
this.__dp=fS;
fS.setContentDocument(this._getIframeDocument());
this.__eO();
if((qx.core.Environment.get(dS)==dN)){this.__eJ();
}this.fireEvent(dF);
},forceEditable:qx.core.Environment.select(dS,{"gecko":function(){var fT=this._getIframeDocument();

if(fT){if(parseFloat(qx.core.Environment.get(cl))>=bY){fT.designMode=dm;
fT.body.contentEditable=false;
fT.body.contentEditable=true;
}else{fT.body.contentEditable=true;
this.__eP(true);
}}},"default":qx.lang.Function.empty}),invalidateEditor:qx.core.Environment.select(dS,{"gecko":function(){this.__eo=false;
this.__em=false;
this.__en=true;
},"default":function(){}}),__eF:qx.core.Environment.select(dS,{"gecko":function(){this.__eI();
this.__eJ();
this.__dp.setContentDocument(this._getIframeDocument());
this.setEditable(true);
this.forceEditable();
this.__eo=true;
this.__em=true;
this.__en=false;
this.fireEvent(cB);
},"default":function(){}}),__eG:function(fU){var fW=dR;

if(!fU){return fW;
}
try{var fV=fU.getAttribute(dn);

if(!fV){return fW;
}if((qx.core.Environment.get(dS)==dQ)){fW=fV.cssText;
}else{fW=fV;
}}catch(fX){this.error("can't extract style from elem. ");
}return fW;
},__eH:function(fY){var ga=qx.core.Environment.get(dS)==dP?dz:dR;
var gb=this.__ev[this.getContentType()];
var gc=r+gb.meta+bw+ga+gb.style+gb.contentStyle+this.__ee+br+q;
var content=gb.body+fY;
return gb.html+gc+content+gb.footer;
},__eI:function(){var ge=this.__eB(this.getValue());

if(qx.lang.Type.isString(ge)){var gd=this._getIframeDocument();

try{gd.open(ci,true);
gd.write(this.__eH(ge));
gd.close();
}catch(e){this.error("cant open document on source '"+qx.bom.Iframe.queryCurrentUrl(this.__eu)+"'",e);
this.fireDataEvent(dT,e);
}}},__eJ:function(){this.__eK();
this.__eM();
this.__eL();
},__eK:function(){var gg=qx.event.Registration;
var gf=this._getIframeDocument();
gg.addListener(gf.body,eq,this._handleKeyPress,this);
gg.addListener(gf.body,bD,this._handleKeyUp,this);
gg.addListener(gf.body,bC,this._handleKeyDown,this);
},__eL:function(){var gj=qx.event.Registration;
var gh=this._getIframeDocument();
var gi=qx.core.Environment.get(dS)==dO?this._getIframeWindow():gh.body;
gj.addListener(gi,bp,this._handleFocusEvent,this);
gj.addListener(gi,bu,this._handleBlurEvent,this);
gj.addListener(gh,bE,this._handleFocusOutEvent,this);
},__eM:function(){var gm=qx.event.Registration;
var gl=this._getIframeDocument();
var gk=qx.core.Environment.get(dS)==dQ?bv:dw;
gm.addListener(gl.body,gk,this._handleMouseUpOnBody,this);
gm.addListener(gl.documentElement,gk,this._handleMouseUpOnDocument,this);
gm.addListener(gl.documentElement,dU,this._handleContextMenuEvent,this);
},__eN:function(){if(this.__er==null){this.__er={execute:function(gn,go){this.stackedCommands=true;
this.commandStack.push({command:gn,value:go});
},commandStack:[],stackedCommands:false};
}this.__er.stackedCommands=false;
return this.__er;
},__eO:function(){var gp=this.__er;

if(gp!=null&&gp.stackedCommands){var gq=gp.commandStack;

if(gq!=null){for(var i=0,j=gq.length;i<j;i++){this.__dp.execute(gq[i].command,gq[i].value);
}}}},__eP:function(gr){var gs=this._getIframeDocument();

if(this.__eo&&gs){try{if((qx.core.Environment.get(dS)==dP)){gs.designMode=(gr!==false)?w:dt;
}gs.designMode=(gr!==false)?dt:w;
}catch(e){}}},setEditable:function(gt){if(this.__eo){this.__eP(true);
if((qx.core.Environment.get(dS)==dP)){try{var gu=this._getIframeDocument();
gu.execCommand(cA,false,true);
}catch(gv){try{var gu=this._getIframeDocument();
gu.execCommand(cf,false,false);
}catch(gw){if(!this.__em){this.error("Failed to enable rich edit functionality");
this.fireDataEvent(dT,gw);
}else{throw new Error("Failed to enable rich edit functionality");
}}}}this.__ep=gt;
}},getEditable:function(){return this.__ep;
},isEditable:function(){return this.__ep;
},__eQ:false,_handleKeyUp:function(e){var gx=e.getKeyIdentifier().toLowerCase();
this.__es=e;

if((false)&&qx.core.Environment.get(cn)){this.debug(e.getType()+" | "+gx);
}if(qx.core.Environment.get(dS)==dQ||qx.core.Environment.get(dS)==dO){if(this.__eQ){switch(gx){case cs:if(this.getInsertLinebreakOnCtrlEnter()){if((qx.core.Environment.get(dS)==dO)){this.__eR();
e.preventDefault();
e.stopPropagation();
}else{var gy=this.__fc(this.getSelection());

if(gy){gy.collapse(true);
gy.pasteHTML(cQ);
}}this.__eW();
}break;
case bq:this.__eQ=false;
return;
break;
}}}else if((qx.core.Environment.get(dS)==dP)){switch(gx){case cq:case co:case bt:case y:case ec:case eu:case R:case dr:case du:this.__eq=(this.getFocusNode()==this.getContentBody().firstChild);
break;
}}},__eR:function(){var gz=this.getSelection();
var gA=dR;
if(gz&&(gz.focusNode.textContent==dR||gz.focusNode.parentElement.tagName==I)){gA=bG;
}this.__dp.execute(ea,gA+qx.bom.htmlarea.HtmlArea.simpleLinebreak);
},_handleKeyDown:qx.core.Environment.select(dS,{"mshtml|webkit":function(e){var gB=e.getKeyIdentifier().toLowerCase();

if((false)&&qx.core.Environment.get(cn)){}if(this.__eQ&&(gB==P||gB==dp||gB==dW||gB==bs||gB==dv||gB==t)){e.preventDefault();
e.stopPropagation();
}if(gB==bq){this.__eQ=true;
}},"default":function(e){}}),_handleKeyPress:function(e){var gG=this.getContentDocument();
var gC=e.getKeyIdentifier().toLowerCase();
var gE=e.isCtrlPressed();
var gF=e.isShiftPressed();
this.__es=e;

if((false)&&qx.core.Environment.get(cn)){this.debug(e.getType()+" | "+gC);
}if(this.__ex){var gM=!((qx.core.Environment.get(dS)==dQ)&&gC==cs)||!((qx.core.Environment.get(dS)==dP)&&gC==cs);

if(gM){this.__eW();
this.__ex=false;
}}
switch(gC){case cs:if(!gF&&!gE&&this.getMessengerMode()){e.preventDefault();
e.stopPropagation();
this.fireDataEvent(cT,this.getComputedValue());
this.resetHtml();
}if(gE){if(!this.getInsertLinebreakOnCtrlEnter()){return;
}e.preventDefault();
e.stopPropagation();

if((qx.core.Environment.get(dS)==dP)){if(this.__fa()){this.insertHtml(cy);
this.__eW();
return;
}this.insertHtml(ce);
}else if((qx.core.Environment.get(dS)==dN)){var gL=this.getSelection();
var gH=this.__fc(gL);

if(gL&&gH){var gI=gG.createElement(ck);
gH.collapse(true);
gH.insertNode(gI);
gH.collapse(true);
gH.selectNode(gI);
gL.addRange(gH);
gH.collapse(true);
}}this.__eW();
}if((qx.core.Environment.get(dS)==dQ)){if(!this.getInsertParagraphOnLinebreak()){if(this.__dp.execute(ea,qx.bom.htmlarea.HtmlArea.simpleLinebreak)){this.__eW();
e.preventDefault();
e.stopPropagation();
}}}else if((qx.core.Environment.get(dS)==dP)){if(this.getInsertParagraphOnLinebreak()&&!gF&&!gE){var gL=this.getSelection();

if(gL){var gD=gL.focusNode;
if(this.__fa()){this.__eW();
return;
}if(this.__fb()){this.__eW();
return;
}while(!qx.dom.Node.isNodeName(gD,dX)){if(qx.dom.Node.isNodeName(gD,bA)){this.__eW();
return;
}gD=gD.parentNode;
}}this.__dp.insertParagraphOnLinebreak();
e.preventDefault();
e.stopPropagation();
this.__eW();
this.__ex=true;
}}else if((qx.core.Environment.get(dS)==dO)){if(this.getInsertParagraphOnLinebreak()&&gF){this.__eR();
e.preventDefault();
e.stopPropagation();
this.__eW();
}}break;
case bt:if(qx.core.Environment.get(dS)==dP&&qx.core.Environment.get(cl)<1.9&&gF){var gL=this.getSelection();
if(gL&&gL.focusNode==gG.body.firstChild){if(this.__eq){if(gL.focusOffset!=0){gL.extend(gL.focusNode,0);
}}}}this.__eW();
break;
case bd:if(qx.core.Environment.get(dS)==dP&&qx.core.Environment.get(cl)<1.9){if(gE){var gL=this.getSelection();
if(gF){if(gL&&(gL.focusOffset!=0)||(gL.focusNode!=gG.body.firstChild)){gL.extend(gG.body.firstChild,0);
}}else{var gJ=null;
var gK;
if(gG){gJ=gG.evaluate(cN,gG.body,null,XPathResult.ANY_TYPE,null);
}
if(gJ&&gL){while(gK=gJ.iterateNext()){if(gK&&gK.parentNode&&gK.parentNode.tagName!=cx){try{gL.extend(gK,0);

if(!this.isSelectionCollapsed()){gL.collapseToStart();
}}catch(e){}break;
}}}}}}this.__eW();
break;
case cq:case co:case y:case ec:case eu:case R:case dr:case du:this.__eW();
break;
case dW:if(gE){this.__eS(bP,true);
}break;
case dv:case t:if(gE){this.__eS(J,true);
}break;
case bs:if(gE){this.__eS(bO,true);
}break;
case P:if(gE&&!gF){this.__eS(bB,true);
}else if(gE&&gF){this.__eS(v,true);
}break;
case dp:if(gE){this.__eS(v,true);
}break;
case dB:if(gE){this.selectAll();
}break;
}this.__es=null;
},__eS:function(gN,gO){var gQ=null;
var gP=qx.bom.htmlarea.HtmlArea.hotkeyInfo;

if(gP[gN]){gQ=gP[gN].method;
}
if(gQ!=null&&this[gQ]){this[gQ]();

if(gO){this.__es.preventDefault();
this.__es.stopPropagation();
}
if(this.isSelectionCollapsed()){this.__ex=true;
}this.__eW();
}},_handleFocusEvent:function(e){this.__et=null;

if(qx.core.Environment.get(dS)==dP||qx.core.Environment.get(dS)==dO){var gR=this.getContentDocument().getElementById(ct);

if(gR){qx.bom.element.Attribute.reset(gR,dL);
}}this.fireEvent(bb);
},_handleBlurEvent:function(e){this.__ef=this.getComputedValue();
},_handleFocusOutEvent:function(e){this.__eQ=false;

if(this.__et==null){this.__et=this.getSelectedHtml();
}this.fireEvent(l);
},_handleMouseUpOnBody:function(e){if((false)&&qx.core.Environment.get(cn)){this.debug("handleMouse "+e.getType());
}this.__ey=true;
this.__eW();
},_handleMouseUpOnDocument:qx.core.Environment.select(dS,{"mshtml":qx.lang.Function.empty,"default":function(e){if(!this.__ey){qx.bom.Element.activate(this.getContentBody());
}this.__ey=false;
}}),_handleContextMenuEvent:function(e){if(!this.getNativeContextMenu()){var gU=e.getViewportLeft();
var gT=e.getViewportTop();
var gV=qx.bom.element.Location.getLeft(this.__el)+gU;
var gW=qx.bom.element.Location.getTop(this.__el)+gT;
var gS={x:gV,y:gW,relX:gU,relY:gT,target:e.getTarget()};
e.preventDefault();
e.stopPropagation();
qx.event.Timer.once(function(){this.fireDataEvent(dU,gS);
},this,0);
}},isLoaded:function(){return this.__eo;
},insertHtml:function(gX){return this.__dp.execute(ea,gX);
},removeFormat:function(){var gY=this.__dp.execute(dD);
this.__dp.execute(ep,this.getDefaultFontSize());
this.__dp.execute(L,this.getDefaultFontFamily());
return gY;
},setBold:function(){return this.__dp.execute(dx);
},setItalic:function(){return this.__dp.execute(eb);
},setUnderline:function(){return this.__dp.execute(dY);
},setStrikeThrough:function(){return this.__dp.execute(ch);
},setFontSize:function(ha){return this.__dp.execute(ep,ha);
},setFontFamily:function(hb){return this.__dp.execute(L,hb);
},setTextColor:function(hc){return this.__dp.execute(be,hc);
},setTextBackgroundColor:function(hd){return this.__dp.execute(bH,hd);
},setJustifyLeft:function(){return this.__dp.execute(k);
},setJustifyCenter:function(){return this.__dp.execute(cd);
},setJustifyRight:function(){return this.__dp.execute(bl);
},setJustifyFull:function(){return this.__dp.execute(cv);
},insertIndent:function(){return this.__dp.execute(cU);
},insertOutdent:function(){return this.__dp.execute(cM);
},insertOrderedList:function(){return this.__dp.execute(ek);
},insertUnorderedList:function(){return this.__dp.execute(da);
},insertHorizontalRuler:function(){return this.__dp.execute(de);
},insertImage:function(he){return this.__dp.execute(dl,he);
},insertHyperLink:function(hf){return this.__dp.execute(W,hf);
},removeBackgroundColor:function(){this.__dp.execute(ed,H);
},setBackgroundColor:function(hg){this.__dp.execute(ed,hg);
},removeBackgroundImage:function(){this.__dp.execute(o);
},setBackgroundImage:function(hh,hi,hj){return this.__dp.execute(o,[hh,hi,hj]);
},selectAll:function(){return this.__dp.execute(cP);
},undo:function(){if(this.getUseUndoRedo()){return this.__dp.execute(ew);
}else{return true;
}},redo:function(){if(this.getUseUndoRedo()){return this.__dp.execute(ds);
}else{return true;
}},resetHtml:function(){var hk=this._getIframeDocument();
while(hk.body.firstChild){hk.body.removeChild(hk.body.firstChild);
}if(qx.core.Environment.get(dS)==dP){hk.body.innerHTML=dE;
}else if(qx.core.Environment.get(dS)==dO){var hl=this.getSelection();
var hm=hk.createRange();

if(hm&&hl){hl.addRange(hm);
}}},getHtml:function(hn){var ho=this._getIframeDocument();

if(ho==null){return null;
}return qx.bom.htmlarea.HtmlArea.__ei(ho.body,false,hn,this.getPostProcess());
},containsOnlyPlaceholder:qx.core.Environment.select(dS,{"mshtml":function(){var hp=this._getIframeDocument();
return (hp.body.innerHTML==cD);
},"default":qx.lang.Function.returnFalse}),_selectElement:function(hq){var hs=this.getContentWindow().getSelection();
var hr=this.getContentDocument().createRange();
hr.setStart(hq,0);
hs.removeAllRanges();
hs.addRange(hr);
},focusContent:qx.core.Environment.select(dS,{"gecko":function(){var hu=this.getContentDocument();
var ht=hu.getElementById(ct);
this.getContentWindow().focus();
qx.bom.Element.focus(this.getContentBody());

if(ht){this._selectElement(ht);
}else{this.__eT();
}},"webkit":function(){qx.bom.Element.focus(this.getContentWindow());
qx.bom.Element.focus(this.getContentBody());
var hv=this.getContentDocument().getElementById(ct);

if(hv){qx.bom.element.Attribute.reset(hv,dL);
}this.__eT();
},"opera":function(){qx.bom.Element.focus(this.getContentWindow());
qx.bom.Element.focus(this.getContentBody());
this.__eT();
},"default":function(){qx.bom.Element.focus(this.getContentBody());
this.__eT();
}}),__eT:function(){if(!this.__eU()){this.__eV();
}},__eU:qx.core.Environment.select(dS,{"gecko":function(){var hw=this.getContentBody().childNodes;

if(hw.length==0){return false;
}else if(hw.length==1){return !(hw[0]&&qx.dom.Node.isNodeName(hw[0],ck)&&qx.bom.element.Attribute.get(hw[0],U)!=null);
}else{return true;
}},"webkit":function(){var hx=this.getContentBody().childNodes;

if(hx.length==0){return false;
}else if(hx.length==1){return !(hx[0]&&qx.dom.Node.isNodeName(hx[0],ck));
}else{return true;
}},"default":function(){var hy=this.getContentBody().childNodes;

if(hy.length==0){return false;
}else if(hy.length==1){return !(hy[0]&&qx.dom.Node.isNodeName(hy[0],ey)&&hy[0].firstChild==null);
}else{return true;
}}}),__eV:qx.core.Environment.select(dS,{"gecko|webkit":function(){this.getContentDocument().body.innerHTML=this.__eB(dR);
var hz=this.getContentDocument().getElementById(ct);
qx.bom.element.Attribute.reset(hz,dL);
this._selectElement(hz);
},"default":function(){var hA=qx.dom.Hierarchy.getFirstDescendant(this.getContentBody());

if(qx.dom.Node.isNodeName(hA,ey)){qx.bom.element.Style.set(hA,es,this.getDefaultFontFamily());
qx.bom.element.Style.set(hA,bn,this.getDefaultFontSize());
}}}),getContextInformation:function(){return this.__eX();
},__eW:function(){qx.event.Timer.once(function(e){var hB=this.__eX();
this.fireDataEvent(cC,hB);
},this,200);
},__eX:function(){if(this._processingExamineCursorContext||this.getEditable()==false){return;
}this._processingExamineCursorContext=true;

if(!this.__eU()){this.__eV();
}var hF=this.getFocusNode();

if(hF==null){return;
}
if(qx.dom.Node.isText(hF)){hF=hF.parentNode;
}var hJ=this._getIframeDocument();
var hS=(qx.core.Environment.get(dS)==dQ)?hF.currentStyle:hJ.defaultView.getComputedStyle(hF,null);
var hM=false;
var hC=false;
var hH=false;
var hG=false;
var hN=false;
var hR=false;
var hI=false;
var hT=false;
var hE=false;
var hP=false;
var hQ=null;
var hU=null;
var hL=null;

if(hS!=null){if((qx.core.Environment.get(dS)==dQ)){hC=hS.fontStyle==eb;
hH=hS.textDecoration.indexOf(dY)!==-1;
hG=hS.textDecoration.indexOf(N)!==-1;
hQ=hS.fontSize;
hL=hS.fontFamily;
hI=hS.textAlign==cq;
hT=hS.textAlign==ez;
hE=hS.textAlign==co;
hP=hS.textAlign==et;
}else{hC=hS.getPropertyValue(ef)==eb;
hH=hS.getPropertyValue(ev).indexOf(dY)!==-1;
hG=hS.getPropertyValue(ev).indexOf(N)!==-1;
hQ=hS.getPropertyValue(bn);
hL=hS.getPropertyValue(es);
hI=hS.getPropertyValue(cp)==cq;
hT=hS.getPropertyValue(cp)==ez;
hE=hS.getPropertyValue(cp)==co;
hP=hS.getPropertyValue(cp)==et;
}
if(qx.core.Environment.get(dS)==dQ||qx.core.Environment.get(dS)==dN){hM=hS.fontWeight==700;
}else{hM=hS.getPropertyValue(E)==dx||qx.dom.Node.isNodeName(hF,dW);
}}var hD=hF;
if(hD!=null&&hD.parentNode!=null&&!qx.dom.Node.isDocument(hD.parentNode)){while(hD!=null&&!qx.dom.Node.isNodeName(hD,dX)){var hK=qx.dom.Node.getName(hD);

if(hK==bx){hR=true;
break;
}else if(hK==bR){hN=true;
break;
}
if(hU==null||hU==dR){hU=qx.bom.element.Attribute.get(hD,z);
}hD=hD.parentNode;
}}var hO={bold:hM?1:0,italic:hC?1:0,underline:hH?1:0,strikethrough:hG?1:0,fontSize:(hU==null)?hQ:hU,fontFamily:hL,insertUnorderedList:hN?1:0,insertOrderedList:hR?1:0,justifyLeft:hI?1:0,justifyCenter:hT?1:0,justifyRight:hE?1:0,justifyFull:hP?1:0};
this._processingExamineCursorContext=false;
return hO;
},getSelection:qx.core.Environment.select(dS,{"mshtml":function(){return this._getIframeDocument()?this._getIframeDocument().selection:null;
},"default":function(){return this._getIframeWindow()?this._getIframeWindow().getSelection():null;
}}),isSelectionCollapsed:qx.core.Environment.select(dS,{"mshtml":function(){return this.getSelection()&&this.getSelection().type==bo;
},"default":function(){return this.getSelection()&&this.getSelection().isCollapsed;
}}),getSelectedText:qx.core.Environment.select(dS,{"mshtml":function(){return this.getRange()?this.getRange().text:dR;
},"default":function(){return this.getRange()?this.getRange().toString():dR;
}}),getSelectedHtml:function(){if(this.__et!=null){return this.__et;
}var hV=this.getRange();

if(!hV){return dR;
}else{return this.__eY(hV);
}},__eY:qx.core.Environment.select(dS,{"mshtml":function(hW){if(!hW){return dR;
}return hW.item?hW.item(0).outerHTML:hW.htmlText;
},"default":function(hX){var hY=this._getIframeDocument();

if(hY&&hX){try{var ia=hY.createElement(dX);
ia.appendChild(hX.cloneContents());
return ia.innerHTML;
}catch(ib){}return hX+dR;
}return dR;
}}),clearSelection:qx.core.Environment.select(dS,{"mshtml":function(){var ic=this.getSelection();

if(ic){ic.empty();
}},"default":function(){var id=this.getSelection();

if(id){id.collapseToStart();
}}}),__fa:qx.core.Environment.select(dS,{"gecko":function(){var ie=this.getSelection();
var ig=this.getFocusNode();
return ie&&this.isSelectionCollapsed()&&ig!=null&&qx.dom.Node.isText(ig)&&ie.anchorOffset<ig.length;
},"default":function(){return false;
}}),__fb:qx.core.Environment.select(dS,{"gecko":function(){return qx.dom.Node.isElement(this.getFocusNode());
},"default":function(){return false;
}}),getRange:function(){return this.__fc(this.getSelection());
},__fc:qx.core.Environment.select(dS,{"mshtml":function(ih){var ii=this._getIframeDocument();

if(ih){try{return ih.createRange();
}catch(ij){return ii?ii.body.createTextRange():null;
}}else{return ii?ii.body.createTextRange():null;
}},"default":function(ik){var il=this._getIframeDocument();

if(ik){try{return ik.getRangeAt(0);
}catch(im){return il?il.createRange():null;
}}else{return il?il.createRange():null;
}}}),saveRange:qx.core.Environment.select(dS,{"mshtml":function(){this.__ew=this.getRange();
},"default":function(){}}),getSavedRange:qx.core.Environment.select(dS,{"mshtml":function(){return this.__ew;
},"default":function(){}}),resetSavedRange:qx.core.Environment.select(dS,{"mshtml":function(){this.__ew=null;
},"default":function(){}}),getFocusNode:qx.core.Environment.select(dS,{"mshtml":function(){var io=this.getSelection();
var ip;

switch(io.type){case cY:case bo:ip=this.__fc(io);

if(ip){ip.collapse(false);
return ip.parentElement();
}else{return null;
}break;
case c:ip=this.__fc(io);

if(ip){try{ip.collapse(false);
}catch(iq){}return ip.item(0);
}else{return null;
}break;
default:return this._getIframeDocument().body;
}},"default":function(){var ir=this.getSelection();

if(ir&&ir.focusNode){return ir.focusNode;
}return this._getIframeDocument().body;
}})},environment:{"qx.bom.htmlarea.HtmlArea.debug":false},destruct:function(){try{var it=this._getIframeDocument();
var iv=qx.event.Registration;
iv.removeListener(it.body,eq,this._handleKeyPress,this);
iv.removeListener(it.body,bD,this._handleKeyUp,this);
iv.removeListener(it.body,bC,this._handleKeyDown,this);
var iu=qx.core.Environment.get(dS)==dO?this._getIframeWindow():it.body;
iv.removeListener(iu,bp,this._handleFocusEvent);
iv.removeListener(iu,bu,this._handleBlurEvent);
iv.removeListener(it,bE,this._handleFocusOutEvent);
var is=qx.core.Environment.get(dS)==dQ?bv:dw;
iv.removeListener(it.body,is,this._handleMouseUpOnBody,this);
iv.removeListener(it.documentElement,is,this._handleMouseUpOnDocument,this);
iv.removeListener(it.documentElement,dU,this._handleContextMenuEvent,this);

if((qx.core.Environment.get(dS)==dQ)){qx.bom.Iframe.setSource(this.__eu,cL);
}}catch(iw){}
if(this.__dp instanceof qx.core.Object){this._disposeObjects(bV);
}else{this.__dp=null;
}this.__ev=this.__eu=this.__el=this.__er=null;
}});
})();
(function(){var m="engine.name",l="Command",k="mshtml",h="gecko",g="Custom",f="Content",d="Internal",c="inserthtml",b="backgroundimage",a="backgroundcolor",bh="webkit",bg="backgroundColor",bf="mousedown",be="table",bd="backgroundImage",bc="backgroundRepeat",bb="p",ba="backgroundPosition",Y="td",X="img",t="inserthyperlink",u="mouseup",r="keypress",s="qx.bom.htmlarea.HtmlArea.debug",p="undo",q="__dp",n="pageup",o="b",x="control",y="shift",G="end",E="right",N="qx_link",I="insertunorderedlist",T="Undo",R="pagedown",A="k",W="home",V="a",U="insertorderedlist",z="y",C="justifyright",D="redo",F="insertParagraph",H="qx.bom.htmlarea.manager.UndoRedo",J="left",O="i",S="u",v="enter",w="Redo",B="insertimage",M="z",L="undoRedoState",K="down",Q="up",P="body";
qx.Class.define(H,{extend:qx.core.Object,construct:function(bi,bj){qx.core.Object.call(this);
this.__dp=bi;
this.__dq=bj;
this.__dr=[];
this.__ds=[];
this._commands=null;
this.__dt=null;
this.__du={};
this.__dv={command:true,content:true,custom:true};
this.__dT();
this.__dw=qx.lang.Function.bind(this._handleKeyPress,this);
this.__dx=qx.lang.Function.bind(this._handleMouseUp,this);

if((qx.core.Environment.get(m)==k)){this.__dy=qx.lang.Function.bind(this._handleMouseDown,this);
}},members:{__dz:false,__dA:false,__dB:false,__dv:null,__du:null,__dp:null,__dt:null,__dr:null,__ds:null,__dq:null,__dw:null,__dx:null,__dy:null,__dC:null,setContentDocument:function(bk){this.__dt=bk;
this.__dp.setContentDocument(bk);
qx.event.Registration.addListener(bk.body,r,this.__dw,this);
qx.event.Registration.addListener(bk.body,u,this.__dx,this);

if((qx.core.Environment.get(m)==k)){qx.event.Registration.addListener(bk.body,bf,this.__dy,this,true);
}},insertParagraphOnLinebreak:function(){return this.__dp.insertParagraphOnLinebreak();
},execute:function(bl,bm){var bn;
bl=bl.toLowerCase();
if(this._commands[bl]){if(this._commands[bl].passthrough){bn=this.__dp.execute(bl,bm);
}else{bn=this[bl].call(this);
}}else{if((qx.core.Environment.get(m)==k)||(qx.core.Environment.get(m)==bh)){this.__dU(bl,bm,this.__dp.getCommandObject(bl));
bn=this.__dp.execute(bl,bm);
if(!bn){this.__dr.pop();
}}else{bn=this.__dp.execute(bl,bm);

if(bn){this.__dU(bl,bm,this.__dp.getCommandObject(bl));
}}
if(bl==p&&this.__dr.length==0){this.__dA=false;
this.__ed();
}else if(bl==D&&this.__ds.length==0){this.__dz=false;
this.__ed();
}}this.__dB=false;
return bn;
},addUndoStep:function(bo,bp,bq){this.__dU(bo,bp,bq);
},registerHandler:function(br,bs,bt,bu){this.__du[br]={undo:bs,redo:bt,context:bu};
},isUndoPossible:function(){return this.__dA;
},undo:function(){var bx;

if(this.__dB){this.__dW();
}if(this.__dr.length>0){var bw=this.__dr.pop();

if(this.__dv[bw.actionType.toLowerCase()]){switch(bw.actionType){case l:bx=this.__dE(bw);
break;
case f:bx=this.__dI(bw);
break;
case d:bx=this.__dH(bw);
break;
case g:bx=this.__dD(bw);
break;
}}else if(this.__du[bw.actionType]){var bv=this.__du[bw.actionType];
bx=bv.undo.call(bv.context?bv.context:this,bw);
this.__dY(bw);
}else{this.error("actionType "+bw.actionType+" is not managed! Please provide a handler method!");
}this.__dz=true;
this.__ed();
return bx;
}},__dD:qx.core.Environment.select(m,{"mshtml|webkit":function(by){var bz=this.__dt.body.innerHTML;
var bB=by.content;
this.__dt.body.innerHTML=bB;
var bA=by;
bA.content=bz;
this.__dY(bA);
return true;
},"default":function(bC){var bG=bC;
var bF=qx.bom.element.Style;
switch(bC.command){case a:bG.parameter=[bF.get(this.__dt.body,bg)];
break;
case b:bG.parameter=[bF.get(this.__dt.body,bd),bF.get(this.__dt.body,bc),bF.get(this.__dt.body,ba)];
break;
}this.__dY(bG);
if(bC.command==t){if((qx.core.Environment.get(m)==h)){var bE=N+this.__dp.__hyperLinkId;
var bD=this.__dt.getElementById(bE);

if(bD){bD.parentNode.removeChild(bD);
return true;
}else{return false;
}}}else{return this.__dp.execute(bC.command,bC.value);
}}}),__dE:qx.core.Environment.select(m,{"mshtml|webkit":function(bH){},"default":function(bI){this.__dY(bI);

if((qx.core.Environment.get(m)==h)){if(bI.command==c&&bI.value==qx.bom.htmlarea.HtmlArea.EMPTY_DIV&&this.__dF(c,F)){this.__dG();
}}return this.__dJ();
}}),__dF:function(bJ,bK){if(this.__dr.length>0){var bL=this.__dr[this.__dr.length-1];
return (bL.command==bJ&&bL.value==bK);
}return false;
},__dG:function(){this.__dJ();

if(this.__dr.length>0){var bM=this.__dr.pop();
this.__dY(bM);
}},__dH:function(bN){this.__dY(bN);
return this.__dJ();
},__dI:qx.core.Environment.select(m,{"gecko":function(bO){this.__dY(bO);

try{return this.__dJ();
}catch(bP){}},"mshtml|webkit":function(bQ){},"default":function(bR){this.__dY(bR);
return this.__dJ();
}}),__dJ:function(){try{return this.__dt.execCommand(T,false,null);
}catch(e){return false;
}},isRedoPossible:function(){return this.__dz;
},redo:function(){if(this.__dz){var bT;
if(this.__ds.length>0){var bU=this.__ds.pop();

if(this.__dv[bU.actionType.toLowerCase()]){switch(bU.actionType){case l:bT=this.__dL(bU);
break;
case f:bT=this.__dR(bU);
break;
case d:bT=this.__dQ(bU);
break;
case g:bT=this.__dK(bU);
break;
}}else if(this.__du[bU.actionType]){var bS=this.__du[bU.actionType];
bT=bS.redo.call(bS.context?bS.context:this,bU);
this.__dX(bU);
}else{this.error("actionType "+bU.actionType+" is not managed! Please provide a handler method!");
}this.__dA=true;
this.__ed();
}return bT;
}},__dK:qx.core.Environment.select(m,{"mshtml|webkit":function(bV){var bW=this.__dt.body.innerHTML;
var bY=bV.content;
this.__dt.body.innerHTML=bY;
var bX=bV;
bX.content=bW;
this.__dX(bX);
return true;
},"default":function(ca){this.__dX(ca);
return this.__dS();
}}),__dL:qx.core.Environment.select(m,{"mshtml|webkit":function(cb){},"default":function(cc){this.__dX(cc);
var cd=this.__dS();

if((qx.core.Environment.get(m)==h)){if(this.__dM(c,qx.bom.htmlarea.HtmlArea.EMPTY_DIV)){var ce=this.__dN();
this.__dO();

if(ce!=null){this.__dP(ce);
}}}return cd;
}}),__dM:function(cf,cg){if(this.__ds.length>0){var ch=this.__ds[this.__ds.length-1];
return (ch.command==cf&&ch.value==cg);
}return false;
},__dN:function(){if(this.__dq==null){return null;
}var ci=this.__dq.getSelection();
var cj=ci?ci.focusNode:null;

if(cj==null){return null;
}
try{while(cj.nodeName.toLowerCase()!=bb){cj=cj.parentNode;

if(!cj||qx.dom.Node.isNodeName(cj,P)){return null;
}}}catch(ck){return null;
}
if(cj!=null&&qx.dom.Node.isNodeName(cj,bb)){return cj;
}else{return null;
}},__dO:function(){var cl=this.__ds.pop();
this.__dX(cl);
this.__dS();
},__dP:qx.core.Environment.select(m,{"gecko":function(cm){if(cm==this.__dq.getContentBody().lastChild){return;
}var cp=cm.firstChild;

while(cp.firstChild){cp=cp.firstChild;
}var cn=this.__dq.getSelection();
var co=this.__dq.getRange();

if(cn&&co){co.selectNode(cp);
cn.addRange(co);
co.collapse(true);
}},"default":qx.lang.Function.empty}),__dQ:function(cq){this.__dX(cq);
return this.__dS();
},__dR:qx.core.Environment.select(m,{"mshtml|webkit":function(cr){},"default":function(cs){this.__dX(cs);
return this.__dS();
}}),__dS:function(){try{return this.__dt.execCommand(w,false,null);
}catch(e){return false;
}},__dT:function(){this._commands={undo:{passthrough:false},redo:{passthrough:false}};
this.__dp.getCommandObject(a).customUndo=true;
this.__dp.getCommandObject(b).customUndo=true;

if((qx.core.Environment.get(m)==h)){}},__dU:qx.core.Environment.select(m,{"mshtml|webkit":function(ct,cu,cv){var cw=this.getUndoRedoObject();
cw.commandObject=cv;
cw.command=ct;
cw.value=cu;
cw.actionType=g;
cw.content=this.__dt.body.innerHTML;
this.__dV(cw);
},"default":function(cx,cy,cz){if(this.__dq==null){return;
}var cB=this.getUndoRedoObject();
cB.commandObject=cz;
cB.command=cx;
cB.value=cy;
cB.actionType=g;
var cA=this.__dq.getSelection();

if(cz.customUndo){var cC=[];

switch(cx){case a:cC.push(qx.bom.element.Style.get(this.__dt.body,bg));
break;
case b:cC.push(qx.bom.element.Style.get(this.__dt.body,bd),qx.bom.element.Style.get(this.__dt.body,bc),qx.bom.element.Style.get(this.__dt.body,ba));
break;
case t:if(cA&&!cA.isCollapsed){cB.actionType=l;
}break;
}cB.parameter=cC;
}else{if((qx.core.Environment.get(m)==h)){if(cA&&cA.isCollapsed){switch(cx){case U:case I:case C:case c:case B:cB.actionType=l;
break;
default:return;
}}else{cB.actionType=l;
}}else{cB.actionType=l;
}}this.__dV(cB);
}}),__dV:function(cD){if(this.__dB){this.__dW();
}this.__dX(cD);
this.__dz=false;
this.__ds=[];
this.__ed();
},__dW:function(){var cE=this.__dr[this.__dr.length-1];

if(cE==null||cE.actionType!=f){var cF=this.getUndoRedoObject();
cF.actionType=f;

if((qx.core.Environment.get(m)==k)||(qx.core.Environment.get(m)==bh)){cF.content=this.__dC;
cF.actionType=g;
this.__dC=null;
}this.__dX(cF);
this.__dB=false;
}},getUndoRedoObject:function(){return {actionType:null,commandObject:null,command:null,value:null,parameter:null,range:null,marker:null,content:null};
},__dX:function(cG){if((false)&&qx.core.Environment.get(s)){this.debug("ADD TO UNDO STACK");
this.debug(cG.actionType+" "+cG.command+" "+cG.value);
}this.__dr.push(cG);
},__dY:function(cH){if((false)&&qx.core.Environment.get(s)){this.debug("ADD TO REDO STACK");
this.debug(cH.actionType+" "+cH.command+" "+cH.value);
}this.__ds.push(cH);
},_handleKeyPress:function(e){var cI=e.getKeyIdentifier().toLowerCase();
var cJ=e.isCtrlPressed();

switch(cI){case x:case y:case J:case E:case Q:case K:case n:case R:case W:case G:case v:break;
case V:case o:case O:case S:case A:case z:case M:if(!cJ){this.__ea();
}break;
default:this.__dz=false;
this.__ds=[];
this.__ea();
}},__ea:function(){if(!this.__dB){this.__dB=true;
this.__dA=true;
if((qx.core.Environment.get(m)==k)||(qx.core.Environment.get(m)==bh)){this.__dC=this.__dt.body.innerHTML;
}this.__ed();
}},__eb:null,_handleMouseDown:qx.core.Environment.select(m,{"mshtml":function(e){var cK=e.getOriginalTarget();

if(qx.dom.Node.isElement(cK)&&(qx.dom.Node.isNodeName(cK,X)||qx.dom.Node.isNodeName(cK,be))){this.__eb={node:cK,content:cK.outerHTML};
}else{this.__eb=null;
}},"default":function(e){return true;
}}),_handleMouseUp:qx.core.Environment.select(m,{"gecko":function(e){if(this.__dq==null){return;
}var cM=this.__dq.getSelection();

if(!cM){this.__eb=null;
return;
}var cL=cM.anchorNode;
var cN=cL.childNodes[cM.anchorOffset];
if(qx.dom.Node.isNodeName(cN,X)){if(this.__eb==null){this.__eb=cN.cloneNode(true);
}else{if(this.__eb.style.width!=cN.style.width||this.__eb.style.height!=cN.style.height){this.__ec();
this.__eb=cN.cloneNode(true);
}}}else if(qx.dom.Node.isNodeName(cL,Y)||qx.dom.Node.isNodeName(cL.parentNode,Y)){var cO=cL.parentNode;

while(qx.dom.Node.isNodeName(cO,be)){cO=cO.parentNode;
}if(this.__eb==null){this.__eb=cO.cloneNode(true);
}else{qx.event.Timer.once(function(){if(cO.style.width!=this.__eb.style.width||cO.style.height!=this.__eb.style.height||cO.innerHTML!=this.__eb.innerHTML){this.__ec();
this.__eb=cO.cloneNode(true);
}},this,0);
}}else{this.__eb=null;
}},"default":function(e){var cP=qx.bom.Event.getTarget(e);

if(this.__eb!=null){if(cP.nodeType==1){if(cP==this.__eb.node){if(cP.outerHTML!=this.__eb.content){this.__eb.content=cP.outerHTML;
this.__ec();
}}else{for(var i=0,j=cP.childNodes.length;i<j;i++){if(cP.childNodes[i]==this.__eb.node){if(cP.childNodes[i].outerHTML!=this.__eb.content){this.__eb.content=cP.childNodes[i].outerHTML;
this.__ec();
}}}}}else{this.__eb=null;
}}}}),__ec:qx.core.Environment.select(m,{"mshtml|webkit":function(){this.__dU(d,null,null);
},"default":function(){var cQ=this.getUndoRedoObject();
cQ.actionType=d;
this.__dX(cQ);
}}),__ed:function(){qx.event.Timer.once(function(e){if(this.__dq!=null){var cR={undo:this.isUndoPossible()?0:-1,redo:this.isRedoPossible()?0:-1};
this.__dq.fireDataEvent(L,cR);
}},this,200);
}},destruct:function(){try{qx.event.Registration.removeListener(this.__dt.body,r,this.__dw);
qx.event.Registration.removeListener(this.__dt,u,this.__dx);

if((qx.core.Environment.get(m)==k)){qx.event.Registration.removeListener(this.__dt,bf,this.__dy);
}}catch(e){}this._disposeObjects(q);
this.__dq=this.__dr=this.__ds=this._commands=this.__dt=null;
this.__dv=this.__du=null;
}});
})();
(function(){var k="textfield",j="button",i="list",h="changeValue",g="selected",f="inner",d="focusin",c="popup",b="focusout",a="blur",w="Enter",v="key",u="Down",t="qx.event.type.Data",s="visible",r="quick",q="String",p="qx.ui.form.ComboBox",o="single",n="combobox",l="click",m="_applyPlaceholder";
qx.Class.define(p,{extend:qx.ui.form.AbstractSelectBox,implement:[qx.ui.form.IStringForm],construct:function(){qx.ui.form.AbstractSelectBox.call(this);
var x=this._createChildControl(k);
this._createChildControl(j);
this.addListener(l,this._onClick);
this.addListener(d,function(e){x.fireNonBubblingEvent(d,qx.event.type.Focus);
},this);
this.addListener(b,function(e){x.fireNonBubblingEvent(b,qx.event.type.Focus);
},this);
},properties:{appearance:{refine:true,init:n},placeholder:{check:q,nullable:true,apply:m}},events:{"changeValue":t},members:{__cM:null,__cN:null,_applyPlaceholder:function(y,z){this.getChildControl(k).setPlaceholder(y);
},_createChildControlImpl:function(A,B){var C;

switch(A){case k:C=new qx.ui.form.TextField();
C.setFocusable(false);
C.addState(f);
C.addListener(h,this._onTextFieldChangeValue,this);
C.addListener(a,this.close,this);
this._add(C,{flex:1});
break;
case j:C=new qx.ui.form.Button();
C.setFocusable(false);
C.setKeepActive(true);
C.addState(f);
this._add(C);
break;
case i:C=qx.ui.form.AbstractSelectBox.prototype._createChildControlImpl.call(this,A);
C.setSelectionMode(o);
break;
}return C||qx.ui.form.AbstractSelectBox.prototype._createChildControlImpl.call(this,A);
},_forwardStates:{focused:true,invalid:true},tabFocus:function(){var D=this.getChildControl(k);
D.getFocusElement().focus();
D.selectAllText();
},focus:function(){qx.ui.form.AbstractSelectBox.prototype.focus.call(this);
this.getChildControl(k).getFocusElement().focus();
},setValue:function(E){var F=this.getChildControl(k);

if(F.getValue()==E){return;
}F.setValue(E);
},getValue:function(){return this.getChildControl(k).getValue();
},resetValue:function(){this.getChildControl(k).setValue(null);
},_onKeyPress:function(e){var H=this.getChildControl(c);
var G=e.getKeyIdentifier();

if(G==u&&e.isAltPressed()){this.getChildControl(j).addState(g);
this.toggle();
e.stopPropagation();
}else if(G==w){if(H.isVisible()){this._setPreselectedItem();
this.resetAllTextSelection();
this.close();
e.stop();
}}else if(H.isVisible()){qx.ui.form.AbstractSelectBox.prototype._onKeyPress.call(this,e);
}},_onClick:function(e){var I=e.getTarget();

if(I==this.getChildControl(j)){this.toggle();
}else{this.close();
}},_onListMouseDown:function(e){this._setPreselectedItem();
},_setPreselectedItem:function(){if(this.__cM){var J=this.__cM.getLabel();

if(this.getFormat()!=null){J=this.getFormat().call(this,this.__cM);
}if(J&&J.translate){J=J.translate();
}this.setValue(J);
this.__cM=null;
}},_onListChangeSelection:function(e){var K=e.getData();

if(K.length>0){var M=this.getChildControl(i);
var L=M.getSelectionContext();

if(L==r||L==v){this.__cM=K[0];
}else{var N=K[0].getLabel();

if(this.getFormat()!=null){N=this.getFormat().call(this,K[0]);
}if(N&&N.translate){N=N.translate();
}this.setValue(N);
this.__cM=null;
}}},_onPopupChangeVisibility:function(e){qx.ui.form.AbstractSelectBox.prototype._onPopupChangeVisibility.call(this,e);
var P=this.getChildControl(c);

if(P.isVisible()){var Q=this.getChildControl(i);
var R=this.getValue();
var O=null;

if(R){O=Q.findItem(R);
}
if(O){Q.setSelection([O]);
}else{Q.resetSelection();
}}else{if(e.getOldData()==s){this.tabFocus();
}}this.getChildControl(j).removeState(g);
},_onTextFieldChangeValue:function(e){var U=e.getData();
var T=this.getChildControl(i);

if(U!=null){var S=T.findItem(U,false);

if(S){T.setSelection([S]);
}else{T.resetSelection();
}}else{T.resetSelection();
}this.fireDataEvent(h,U,e.getOldData());
},getTextSelection:function(){return this.getChildControl(k).getTextSelection();
},getTextSelectionLength:function(){return this.getChildControl(k).getTextSelectionLength();
},setTextSelection:function(V,W){this.getChildControl(k).setTextSelection(V,W);
},clearTextSelection:function(){this.getChildControl(k).clearTextSelection();
},selectAllText:function(){this.getChildControl(k).selectAllText();
},resetAllTextSelection:function(){this.clearTextSelection();
this.selectAllText();
}}});
})();
(function(){var k="textfield",j="list",i="popup",h="button",g="popupOpen",f="blur",d="changeValue",c="Down",b="inner",a="",H="qx.dynlocale",G="focusin",F="focusout",E="qx.util.format.DateFormat",D="Escape",C="Left",B="Up",A="execute",z="qx.event.type.Data",y="changeLocale",r="visible",s="middle",p="String",q="_applyDateFormat",n="changeVisibility",o="mouseup",l="medium",m="click",t="qx.ui.form.DateField",u="datefield",w="_applyPlaceholder",v="hidden",x="Right";
qx.Class.define(t,{extend:qx.ui.core.Widget,include:[qx.ui.core.MRemoteChildrenHandling,qx.ui.form.MForm],implement:[qx.ui.form.IForm,qx.ui.form.IDateForm],construct:function(){qx.ui.core.Widget.call(this);
var J=new qx.ui.layout.HBox();
this._setLayout(J);
J.setAlignY(s);
var I=this._createChildControl(k);
this._createChildControl(h);
this.addListener(m,this._onClick,this);
this.addListener(f,this._onBlur,this);
this.addListener(G,function(e){I.fireNonBubblingEvent(G,qx.event.type.Focus);
},this);
this.addListener(F,function(e){I.fireNonBubblingEvent(F,qx.event.type.Focus);
},this);
this._setDefaultDateFormat();
this._addLocaleChangeLeistener();
},events:{"changeValue":z},properties:{dateFormat:{check:E,apply:q},placeholder:{check:p,nullable:true,apply:w},appearance:{refine:true,init:u},focusable:{refine:true,init:true},width:{refine:true,init:120}},statics:{__cQ:null,__fd:null,getDefaultDateFormatter:function(){var K=qx.locale.Date.getDateFormat(l).toString();

if(K==this.__cQ){return this.__fd;
}
if(this.__fd){this.__fd.dispose();
}this.__fd=new qx.util.format.DateFormat(K,qx.locale.Manager.getInstance().getLocale());
this.__cQ=K;
return this.__fd;
}},members:{__fe:null,_forwardStates:{focused:true,invalid:true},_setDefaultDateFormat:function(){this.setDateFormat(qx.ui.form.DateField.getDefaultDateFormatter());
},_addLocaleChangeLeistener:function(){if(qx.core.Environment.get(H)){this.__fe=qx.locale.Manager.getInstance().addListener(y,function(){this._setDefaultDateFormat();
},this);
}},setValue:function(L){var M=this.getChildControl(k);
M.setValue(this.getDateFormat().format(L));
var N=this.getChildControl(j);
N.setValue(L);
},getValue:function(){var O=this.getChildControl(k).getValue();
try{return this.getDateFormat().parse(O);
}catch(P){return null;
}},resetValue:function(){var Q=this.getChildControl(k);
Q.setValue(a);
var R=this.getChildControl(j);
R.setValue(null);
},open:function(){var S=this.getChildControl(i);
S.placeToWidget(this,true);
S.show();
},close:function(){this.getChildControl(i).hide();
},toggle:function(){var T=this.getChildControl(i).isVisible();

if(T){this.close();
}else{this.open();
}},_applyDateFormat:function(U,V){if(!V){return;
}try{var X=this.getChildControl(k);
var Y=X.getValue();
var W=V.parse(Y);
X.setValue(U.format(W));
}catch(ba){}},_applyPlaceholder:function(bb,bc){this.getChildControl(k).setPlaceholder(bb);
},_createChildControlImpl:function(bd,be){var bf;

switch(bd){case k:bf=new qx.ui.form.TextField();
bf.setFocusable(false);
bf.addState(b);
bf.addListener(d,this._onTextFieldChangeValue,this);
bf.addListener(f,this.close,this);
this._add(bf,{flex:1});
break;
case h:bf=new qx.ui.form.Button();
bf.setFocusable(false);
bf.setKeepActive(true);
bf.addState(b);
this._add(bf);
break;
case j:bf=new qx.ui.control.DateChooser();
bf.setFocusable(false);
bf.setKeepFocus(true);
bf.addListener(A,this._onChangeDate,this);
break;
case i:bf=new qx.ui.popup.Popup(new qx.ui.layout.VBox);
bf.setAutoHide(false);
bf.add(this.getChildControl(j));
bf.addListener(o,this._onChangeDate,this);
bf.addListener(n,this._onPopupChangeVisibility,this);
break;
}return bf||qx.ui.core.Widget.prototype._createChildControlImpl.call(this,bd);
},_onChangeDate:function(e){var bg=this.getChildControl(k);
var bh=this.getChildControl(j).getValue();
bg.setValue(this.getDateFormat().format(bh));
this.close();
},_onClick:function(e){var bi=e.getTarget();

if(bi==this.getChildControl(h)){this.toggle();
}else{this.close();
}},_onBlur:function(e){this.close();
},_onKeyPress:function(e){var bj=e.getKeyIdentifier();

if(bj==c&&e.isAltPressed()){this.toggle();
e.stopPropagation();
return;
}var bk=this.getChildControl(i);

if(bk.getVisibility()==v){return;
}if(bj==D){this.close();
e.stopPropagation();
return;
}if(bj===C||bj===x||bj===c||bj===B){e.preventDefault();
}this.getChildControl(j).handleKeyPress(e);
},_onPopupChangeVisibility:function(e){e.getData()==r?this.addState(g):this.removeState(g);
var bm=this.getChildControl(i);

if(bm.isVisible()){var bn=this.getChildControl(j);
var bl=this.getValue();
bn.setValue(bl);
}},_onTextFieldChangeValue:function(e){var bo=this.getValue();

if(bo!=null){var bp=this.getChildControl(j);
bp.setValue(bo);
}this.fireDataEvent(d,this.getValue());
},isEmpty:function(){var bq=this.getChildControl(k).getValue();
return bq==null||bq==a;
}},destruct:function(){if(qx.core.Environment.get(H)){if(this.__fe){qx.locale.Manager.getInstance().removeListenerById(this.__fe);
}}}});
})();
(function(){var bv="",bu="target",bt="execute",bs="background",br="<tr>",bq="changeSelection",bp="font",bo="qooxdoo logo",bn="right",bm="</tr>",bb="changeValue",ba="qx/icon/Oxygen/16/actions/format-indent-more.png",Y="Georgia",X="http://",W="Change Font Size",V="colorselector-cancelbutton",U="Indent More",T="Zoom Window",S="Align Right",R="Format Italic",bC="qx/icon/Oxygen/16/actions/format-text-underline.png",bD="westorelggman/htmlarea/qooxdoo_logo.png",bA="westorelggman/htmlarea/insert-table.png",bB="OK",by="Comic Sans MS",bz="Tahoma",bw="<td>First Row, First cell</td>",bx="solid",bE="qx/icon/Oxygen/16/actions/format-justify-center.png",bF="Align Justify",bf="qx.event.type.Event",be="Inserted Unordered List",bh="Insert Horizontal Ruler",bg="ready",bj="HTML Code:",bi="Set Text Background Color",bl="Cancel",bk="<td>Second Row, First cell</td>",bd="</tbody>",bc="Undo Last Change",a="Set Text Color",b="Insert Table",c="qx/icon/Oxygen/16/actions/view-fullscreen.png",d="qx/icon/Oxygen/16/actions/edit-undo.png",f="qx/icon/Oxygen/16/actions/edit-clear.png",g="Arial Black",h="Impact",k="Redo Last Undo Step",l="Format Bold",m="westorelggman/htmlarea/format-fill-color.png",bJ="minmax",bI="Color Selector",bH="westorelggman.HtmlArea",bG="main",bN="Insert Hyperlink",bM="colorselector-okbutton",bL="Remove Format",bK="blank.html",bP="</table>",bO="12px ",B="<td>First Row, Second cell</td>",C="Insert Ordered List",z="qx/icon/Oxygen/16/actions/format-justify-left.png",A='',F="Courier",G="westorelggman/htmlarea/format-text-color.png",D="Courier New",E="qx/icon/Oxygen/16/actions/format-justify-right.png",x="qx/icon/Oxygen/16/actions/format-text-bold.png",y="<td>Second Row, Second cell</td>",u="Align Left",t="westorelggman/htmlarea/format-list-ordered.png",w="<table border='1'>",v="qx/icon/Oxygen/16/actions/format-indent-less.png",q="<tbody>",p="Times New Roman",s="Align Center",r="qx/icon/Oxygen/16/actions/edit-redo.png",o="Lucida Console",n="border-main",L="qx/icon/Oxygen/16/actions/format-text-italic.png",M="Change Font Family",N="Arial",O="qx/icon/Oxygen/16/actions/format-justify-fill.png",H="Verdana",I="Indent Less",J="westorelggman/htmlarea/insert-horizontal-rule.png",K="Format Underline",P="westorelggman/htmlarea/format-list-unordered.png",Q="scroll";
qx.Class.define(bH,{extend:qx.ui.container.Composite,construct:function(bQ,bR){elggmanHtmlArea=this;
qx.ui.container.Composite.call(this,new qx.ui.layout.VBox(0));
var bS=new qx.ui.decoration.Single(1,bx,n);
bS.setWidthTop(0);
this.__ff=new qx.ui.embed.HtmlArea(A,null,bK);
this.__ff.set({width:bQ,height:bR,decorator:bS,defaultFontSize:2});
var toolbar=this.__fr();
this.add(toolbar);
this.add(this.__ff);
this.__fg=new qx.ui.control.ColorPopup();
this.__fg.exclude();
var self=this;
this.__fg.addListener(bb,function(){var bT=this.getUserData(bu);
var bU=this.getValue();

if(bT==bp){self.__ff.setTextColor(bU);
}else if(bT==bs){self.__ff.setTextBackgroundColor(bU);
}});
this.__fg._createColorSelector=function(){if(this.__dm){return;
}var bV=new qx.ui.window.Window(this.tr(bI));
this.__dl=bV;
bV.setLayout(new qx.ui.layout.VBox(16));
bV.setResizable(false);
bV.setZIndex(99999);
bV.setModal(true);
var bY=elggmanHtmlArea.getContainerLocation(Q);
bV.moveTo(bY.left,bY.top-120);
this.__dm=new qx.ui.control.ColorSelector;
bV.add(this.__dm);
var bW=new qx.ui.container.Composite(new qx.ui.layout.HBox(8,bn));
bV.add(bW);
var ca=this._createChildControl(V);
var bX=this._createChildControl(bM);
bW.add(ca);
bW.add(bX);
};
},events:{"minmax":bf},members:{__ff:null,__fg:null,__fh:function(e){elggmanHtmlArea.__fg.placeToWidget(e.getTarget());
elggmanHtmlArea.__fg.setUserData(bu,bp);
elggmanHtmlArea.__fg.show();
},__fi:function(e){elggmanHtmlArea.__fg.placeToWidget(e.getTarget());
elggmanHtmlArea.__fg.setUserData(bu,bs);
elggmanHtmlArea.__fg.show();
},__fj:function(e){var cb={src:qx.util.ResourceManager.getInstance().toUri(bD),border:0,title:bo,alt:bo};
this.insertImage(cb);
},__fk:function(e){elggmanHtmlArea.fireEvent(bJ);
},__fl:function(e){var cc=w+q+br+bw+B+bm+br+bk+y+bm+bd+bP;
this.insertHtml(cc);
},__fm:function(e){var ce=new qx.ui.window.Window(bN);
ce.setLayout(new qx.ui.layout.VBox(20));
ce.set({width:400,showMaximize:false,showMinimize:false});
var ci=new qx.ui.form.TextField(X);
ce.add(ci);
var cg=new qx.ui.layout.HBox(10);
cg.setAlignX(bn);
var ch=new qx.ui.container.Composite(cg);
var cd=new qx.ui.form.Button(bB);
cd.setWidth(60);
cd.addListener(bt,function(e){this.insertHyperLink(ci.getValue());
ce.close();
},this);
ch.add(cd);
var cf=new qx.ui.form.Button(bl);
cf.setWidth(60);
cf.addListener(bt,function(e){ce.close();
},this);
ch.add(cf);
ce.add(ch);
ce.center();
ce.open();
this.saveRange();
},__fn:function(e){var cj=window.prompt(bj,bv);
this.insertHtml(cj);
},__fo:function(){var cl=new qx.ui.form.SelectBox;
cl.set({toolTipText:M,focusable:false,keepFocus:true,width:120,height:16,margin:[4,0]});
cl.add(new qx.ui.form.ListItem(bv));
var cm=[bz,H,p,N,g,D,F,Y,h,by,o];
var ck;

for(var i=0,j=cm.length;i<j;i++){ck=new qx.ui.form.ListItem(cm[i]);
ck.set({focusable:false,keepFocus:true,font:qx.bom.Font.fromString(bO+cm[i])});
cl.add(ck);
}cl.addListener(bq,function(e){var cn=e.getData()[0].getLabel();

if(cn!=bv){this.setFontFamily(cn);
}},this.__ff);
return cl;
},__fp:function(){var cp=new qx.ui.form.SelectBox;
cp.set({toolTipText:W,focusable:false,keepFocus:true,width:50,height:16,margin:[4,0]});
cp.add(new qx.ui.form.ListItem(bv));
var co;

for(var i=1;i<=7;i++){co=new qx.ui.form.ListItem(i+bv);
co.set({focusable:false,keepFocus:true});
cp.add(co);
}cp.addListener(bq,function(e){var cq=e.getData()[0].getLabel();

if(cq!=bv){this.setFontSize(cq);
}},this.__ff);
return cp;
},__fq:function(){return [{bold:{text:l,image:x,action:this.__ff.setBold},italic:{text:R,image:L,action:this.__ff.setItalic},underline:{text:K,image:bC,action:this.__ff.setUnderline},removeFormat:{text:bL,image:f,action:this.__ff.removeFormat}},{alignLeft:{text:u,image:z,action:this.__ff.setJustifyLeft},alignCenter:{text:s,image:bE,action:this.__ff.setJustifyCenter},alignRight:{text:S,image:E,action:this.__ff.setJustifyRight},alignJustify:{text:bF,image:O,action:this.__ff.setJustifyFull}},{fontFamily:{custom:this.__fo},fontSize:{custom:this.__fp},fontColor:{text:a,image:G,action:this.__fh},textBackgroundColor:{text:bi,image:m,action:this.__fi}},{indent:{text:U,image:ba,action:this.__ff.insertIndent},outdent:{text:I,image:v,action:this.__ff.insertOutdent}},{insertTable:{text:b,image:bA,action:this.__fl},insertHR:{text:bh,image:J,action:this.__ff.insertHorizontalRuler}},{ol:{text:C,image:t,action:this.__ff.insertOrderedList},ul:{text:be,image:P,action:this.__ff.insertUnorderedList}},{undo:{text:bc,image:d,action:this.__ff.undo},redo:{text:k,image:r,action:this.__ff.redo}},{insertImage:{text:T,image:c,action:this.__fk}}];
},__fr:function(){var toolbar=new qx.ui.toolbar.ToolBar();
toolbar.setDecorator(bG);
var cr;
var cs=this.__fq();

for(var i=0,j=cs.length;i<j;i++){var ct=new qx.ui.toolbar.Part;
toolbar.add(ct);

for(var cu in cs[i]){var cv=cs[i][cu];

if(cv.custom){cr=cv.custom.call(this);
}else{cr=new qx.ui.toolbar.Button(null,cv.image);
cr.set({focusable:false,keepFocus:true,center:true,toolTipText:cv.text?cv.text:bv});
cr.addListener(bt,cv.action,this.__ff);
}ct.add(cr);
}}return toolbar;
},getHtml:function(){return this.__ff.getComputedValue();
},getHtmlArea:function(){return this.__ff;
},setHtml:function(cw){this.__ff.setValue(cw);

if(this.__ff.getValue()!=cw){this.__ff.addListenerOnce(bg,function(){this.__ff.setValue(cw);
},this);
}}}});
})();
(function(){var cw="engine.name",cv="",cu="legacy-font-size",ct="mshtml",cs="inserthtml",cr='color',cq="text-decoration",cp=';',co="__fU",cn="p",bx="span",bw="transparent",bv="id",bu="InsertHtml",bt='">',bs="child",br="gecko",bq="font-family",bp="text-align",bo='text-decoration',cD="BackColor",cE="FontSize",cB="/>",cC="<img ",cz="</font>",cA="backgroundPosition",cx="font-size",cy='|',cF="string",cG="background-color",bV="backgroundRepeat",bU="font",bX=":",bW="='",ca=";",bY="body",cc="px",cb="backgroundImage",bT="Control",bS="__paragraph__",a=':',b="qx.bom.htmlarea.HtmlArea.debug",c="size",d="__fV",f="' ",g="webkit",h="textDecoration",m="BODY",n=" ",o="undefined",cR="backgroundColor",cQ="_moz",cP="top",cO="formatBlock",cV="insertParagraph",cU="li",cT='<span style="',cS="__gb",cX="__fX",cW="no-repeat",N="__gk",O="__gr",L="FONT",M="|top|bottom|center|left|right|right top|left top|left bottom|right bottom|",R="__placeholder__",S='font-family:',P="<p style='",Q="outdent",J='</a> ',K="InsertImage",w="__resetHtml",v="FontName",y="bold",x="__gu",s="blockquote",r="underline",u="__gj",t="style",q="qx.bom.htmlarea.manager.Command",p="'><br class='webkit-block-placeholder' />",X="a",Y='"',ba="<span></span>",bb="__gt",T="__gm",U="type",V="CreateLink",W=' <a href="',bc="italic",bd="qx_link",G="none",F='"></span>',E="Italic",D="fontStyle",C="__gl",B="InsertUnorderedList",A="OL",z='text-align:',I="Bold",H="ForeColor",be="url(",bf='" ',bg="repeat repeat-x repeat-y no-repeat",bh='</p>',bi="<hr />",bj='<font style="',bk="IMG",bl="__go",bm='<p id="',bn="StrikeThrough",bB="LI",bA="__getHtml",bz='>',by="__ga",bF="Indent",bE="HiliteColor",bD="__fQ",bC="br",bH="fontWeight",bG="Copy",bO="</span>",bP="Paste",bM="__gn",bN="RemoveFormat",bK="JustifyRight",bL='',bI='style="',bJ="JustifyCenter",bQ="_moz_dirty",bR="__gp",cg="color",cf="JustifyLeft",ci="Underline",ch="SelectAll",ck="Cut",cj="line-through",cm=")",cl="href",ce='<span id="',cd="UL",cK="JustifyFull",cL="__gs",cM="Outdent",cN="indent",cH="selectall",cI="InsertOrderedList",cJ='" size="';
qx.Class.define(q,{extend:qx.core.Object,construct:function(cY){qx.core.Object.call(this);
this.__dq=cY;
this.__dt=null;
this._commands=null;
this.__dT();
this.__fG={"Bold":true,"Italic":true,"Underline":true,"StrikeThrough":true};
this.__fH=[10,12,16,18,24,32,48];
this.__fI=0;
},statics:{__fJ:M,__fK:bg},members:{__dt:null,__dq:null,__fL:false,__fG:null,__fH:null,__fI:null,setContentDocument:function(da){this.__dt=da;
},getCommandObject:function(db){if(this._commands[db]){return this._commands[db];
}else{return null;
}},__dT:function(){this._commands={bold:{useBuiltin:false,identifier:I,method:O},italic:{useBuiltin:false,identifier:E,method:cL},underline:{useBuiltin:false,identifier:ci,method:bb},strikethrough:{useBuiltin:false,identifier:bn,method:x},fontfamily:{useBuiltin:true,identifier:v,method:null},fontsize:{useBuiltin:false,identifier:cE,method:u},textcolor:{useBuiltin:true,identifier:H,method:null},textbackgroundcolor:{useBuiltin:false,identifier:null,method:N},backgroundcolor:{useBuiltin:false,identifier:null,method:C},backgroundimage:{useBuiltin:false,identifier:null,method:T},justifyleft:{useBuiltin:false,identifier:cf,method:co},justifyright:{useBuiltin:false,identifier:bK,method:co},justifycenter:{useBuiltin:false,identifier:bJ,method:co},justifyfull:{useBuiltin:false,identifier:cK,method:co},indent:{useBuiltin:true,identifier:bF,method:null},outdent:{useBuiltin:true,identifier:cM,method:null},copy:{useBuiltin:true,identifier:bG,method:null},cut:{useBuiltin:true,identifier:ck,method:null},paste:{useBuiltin:true,identifier:bP,method:null},insertorderedlist:{useBuiltin:false,identifier:cI,method:d},insertunorderedlist:{useBuiltin:false,identifier:B,method:d},inserthorizontalrule:{useBuiltin:false,identifier:bu,method:cS},insertimage:{useBuiltin:false,identifier:K,method:cX},inserthyperlink:{useBuiltin:false,identifier:V,method:by},selectall:{useBuiltin:false,identifier:ch,method:bM},selectedtext:{useBuiltin:false,identifier:null,method:bl},selectedhtml:{useBuiltin:false,identifier:null,method:bR},inserthtml:{useBuiltin:false,identifier:bu,method:bD},resethtml:{useBuiltin:false,identifier:null,method:w},gethtml:{useBuiltin:false,identifier:null,method:bA},removeformat:{useBuiltin:true,identifier:bN,method:null}};
},execute:function(dc,dd){if(!this.__dq.isReady()){this.error("editor not ready! '"+dc+"':'"+dd+"'");
return false;
}dc=dc.toLowerCase();
dd=dd!=null?dd:null;
if(this._commands[dc]){var de;
var df=this._commands[dc];
if(!((qx.core.Environment.get(cw)==g)&&(dc==cN||dc==Q))){if(this.__fM()){this.__fN();
}}if(df.useBuiltin){de=this.__fO(df.identifier,false,dd);
}else{if(df.method!=null&&this[df.method]){de=this[df.method].call(this,dd,df);
}else{this.error("The method '"+df.method+"' you calling to execute the command '"+dc+"' is not available!");
}}this.__dq.resetSavedRange();
return de;
}else{this.error("Command "+dc+" is currently not supported!");
}},__fM:function(){var Node=qx.dom.Node;
var dg=this.__dq.getFocusNode();
var dj=false;
var dh=false;

if(dg){if(Node.isText(dg)){var di=qx.dom.Hierarchy.getAncestors(dg);

for(var i=0,j=di.length;i<j;i++){if(Node.isNodeName(di[i],cn)||qx.bom.htmlarea.HtmlArea.isHeadlineNode(di[i])){dj=true;
break;
}}}else if(Node.isNodeName(dg,bY)){dh=true;
}}return dh||!dj;
},__fN:function(){this.__fO(cO,false,cn);
},__fO:function(dk,dl,dm){try{var dq=this.__dt;
var dn=false;
var dp=this.__dq.getRange();
this.__dt.body.focus();
if((qx.core.Environment.get(cw)==ct)){if(dk!=cH){dp.select();
if(((dp.text)&&(dp.text.length>0))||((dp.length==1)&&(dp.item(0))&&(dp.item(0).tagName==bk))){dq=dp;
}else{dq=this.__dt;
}}if(((qx.core.Environment.get(cw)==ct))&&(this.__fG[dk])){if(dp.text==cv){dn=true;
}}}var dr=dq.execCommand(dk,dl,dm);

if(dn&&dp.text!=cv){dp.collapse();
}
if((false)&&qx.core.Environment.get(b)){this.debug("execCommand "+dk+" with value "+dm+" succeded");
}this.__fL=false;
}catch(ds){if((false)&&qx.core.Environment.get(b)){this.debug("execCommand "+dk+" with value "+dm+" failed");
}return false;
}return dr;
},__fP:qx.core.Environment.select(cw,{"mshtml":function(){var du=this.__dq;
var dt=du.getSavedRange()!=null?du.getSavedRange():du.getRange();
return dt;
},"default":function(){return this.__dq.getRange();
}}),__fQ:qx.core.Environment.select(cw,{"mshtml":function(dv,dw){var dz;
if(dv==qx.bom.htmlarea.HtmlArea.simpleLinebreak){return this.__fT();
}else{this.__dt.body.focus();
var dy=this.__dq.getSelection();
var dx=this.__fP();
if(dx&&dy&&dy.type!=bT){try{dx.pasteHTML(dv);
dx.collapse(false);
dx.select();
dz=true;
}catch(e){}}else{dz=false;
}this.__dq.resetSavedRange();
return dz;
}},"default":function(dA,dB){this.__dt.body.focus();
return this.__dt.execCommand(dB.identifier,false,dA);
}}),insertParagraphOnLinebreak:qx.core.Environment.select(cw,{"gecko":function(){var dJ=this.__ge();
var dN=this.__fR(dJ);
var dF=this.__gc(dJ);
var dK=R+Date.parse(new Date());
var dL=bS+Date.parse(new Date());
var dD=bL;
var dH=ce+dK+F;
dD+=dH;
dD+=bm+dL+bf+dN+bz;
dD+=dF+bh;
this.__dq.getCommandManager().addUndoStep(cs,cV,this.getCommandObject(cs));
this.execute(cs,dD);
this.__fS();
qx.bom.element.Attribute.reset(this.__dt.getElementById(dK),bv);
var dI=this.__dt.getElementById(dL);

if(dI.previousSibling.innerHTML==dH){var dC=this.__gd();
var dG=this.__dt.createElement(bC);
var dE=this.__dt.createAttribute(bQ);
dE.nodeValue=cv;
dG.setAttributeNode(dE);
var dM=this.__dt.createAttribute(U);
dM.nodeValue=cQ;
dG.setAttributeNode(dM);
dI.previousSibling.appendChild(dC);
dI.previousSibling.appendChild(dG);
}qx.bom.element.Attribute.reset(dI,bv);
return true;
},"webkit":function(){var dO=this.getCurrentStyles();
var dP=cv;
var dR={"background-color":true,"text-align":true};
for(var dQ in dO){if(dR[dQ]){dP+=dQ+bX+dO[dQ]+ca;
}}this.__dq.insertHtml(P+dP+p);
},"default":qx.lang.Function.empty}),__fR:qx.core.Environment.select(cw,{"gecko":function(dS){var dX=bI;
var dW=dS.child;
if(dW[bp]){dX+=z+dW[bp]+cp;
delete dS.child[bp];
}if(dW[bq]){dX+=S+dW[bq]+cp;
delete dS.child[bq];
}var dV={"padding-top":true,"padding-bottom":true,"padding-left":true,"padding-right":true};
var dT={"margin-top":true,"margin-bottom":true,"margin-left":true,"margin-right":true};

for(var dU in dW){if(dV[dU]||dT[dU]){dX+=dU+a+dW[dU]+cp;
delete dS.child[dU];
}}dX+=Y;
return dX;
},"default":function(){return cv;
}}),__fS:qx.core.Environment.select(cw,{"gecko":function(){var eg=this.__dq.getSelection();

if(!eg||!eg.focusNode){return;
}var dY=eg.focusNode;
var ee=eg.focusNode;

while(!qx.dom.Node.isNodeName(ee,cn)){ee=ee.parentNode;
}var ed=ee.previousSibling.id;
var eh=ee.nextSibling?ee.nextSibling.id:null;

if(qx.lang.String.startsWith(ed,bS)&&ed==eh){var ef=ee.nextSibling;
var eb=this.__dq.getRange();
eb.selectNode(ef);
eg.addRange(eb);
var ea=qx.bom.htmlarea.HtmlArea.EMPTY_DIV;
this.__dq.getCommandManager().addUndoStep(cs,ea,this.getCommandObject(cs));
this.execute(cs,ea);
var ec=this.__dq.getRange();

if(dY){while(dY&&dY.firstChild&&qx.dom.Node.isElement(dY.firstChild)){dY=dY.firstChild;
}}ec.selectNode(dY);
eg.addRange(ec);
ec.collapse(true);
}},"default":qx.lang.Function.empty}),__fT:qx.core.Environment.select(cw,{"mshtml":function(){var ei=this.__dq.getRange();
if(ei&&!qx.dom.Node.isNodeName(ei.parentElement(),cU)){ei.pasteHTML(qx.bom.htmlarea.HtmlArea.simpleLinebreak);
ei.collapse(false);
ei.select();
return true;
}return false;
},"default":function(){return false;
}}),__fU:function(ej,ek){var el=(qx.core.Environment.get(cw)==ct)?this.__dq.getRange():this.__dt;
return el.execCommand(ek.identifier,false,ej);
},__fV:function(em,en){if((qx.core.Environment.get(cw)==ct)){var eo=this.__dq.getFocusNode();
this.__fW(eo);
}this.__dt.body.focus();
var ep=this.__dt.execCommand(en.identifier,false,em);

if((qx.core.Environment.get(cw)==g)){var eo=this.__dq.getFocusNode();
this.__fW(eo.parentNode);
}return ep;
},__fW:function(eq){var er=[];
var parent=eq.parentNode;

while(qx.dom.Node.isNodeName(parent,s)){er.push(parent);
parent=parent.parentNode;
}if(er.length>0){parent.appendChild(eq);
parent.removeChild(er[er.length-1]);
}},__fX:qx.core.Environment.select(cw,{"gecko":function(es,et){if(es.src){this.__dt.execCommand(et.identifier,false,es.src);
delete es.src;
var eH=this.__dq.getSelection();
if(eH){var eG=eH.anchorNode;
var eB=eH.anchorOffset;
var ey=eG.childNodes[eB-1];
var eE;

for(var eA in es){eE=this.__dt.createAttribute(eA);
eE.nodeValue=es[eA];
ey.setAttributeNode(eE);
}var ez={"font":true,"span":true};
var ev=null;
var eD=true;
if(qx.dom.Node.isElement(ey.previousSibling)&&ez[qx.dom.Node.getName(ey.previousSibling)]){ev=ey.previousSibling;
}else if(ez[qx.dom.Node.getName(ey.parentNode)]){ev=ey.parentNode;
eD=false;
}var ew=this.__dt.createDocumentFragment();
var eI;

if(eD&&ev!=null){var ez=this.__fY(ev);
ew.appendChild(ez.root);
eI=ez.inline;
}else{eI=this.__dt.createElement(bx);
ew.appendChild(eI);
}var eF=this.__dt.createTextNode(cv);
eI.appendChild(eF);
var eC=ey.parentNode;
if(ey==eC.lastChild){eC.appendChild(ew);
}else{eC.insertBefore(ew,ey.nextSibling);
}var eu=this.__dq.getRange();
eu.selectNodeContents(eI);
}return true;
}else{return false;
}},"mshtml":function(eJ,eK){var eO=false;
var eP=cC;

for(var eL in eJ){eP+=eL+bW+eJ[eL]+f;
}eP+=cB;
var eM=this.__dq.getSelection();
var eN=this.__fP();
if(eM&&eM.type!=bT){try{eN.select();
eN.pasteHTML(eP);
eO=true;
}catch(e){}}this.__dq.resetSavedRange();
return eO;
},"default":function(eQ,eR){if(eQ.src){var eT=cC;

for(var eS in eQ){eT+=eS+bW+eQ[eS]+f;
}eT+=cB;
return this.__dt.execCommand(bu,false,eT);
}else{return false;
}}}),__fY:function(eU){while(eU.firstChild&&eU.firstChild.nodeType==1){eU=eU.firstChild;
}var eY=this.__ge(eU);
var fd,eW,fb;
var eV=cv;
var parent=null;
var fc=null;
var fa=eY.child;

while(fa){fc=this.__dt.createElement(fa[cu]?bU:bx);
eW=this.__dt.createAttribute(t);
fc.setAttributeNode(eW);
for(var eX in fa){if(eX!=bs&&eX!=cu){eV+=eX+bX+fa[eX]+ca;
}else if(eX==cu){fb=this.__dt.createAttribute(c);
fb.nodeValue=fa[eX];
fc.setAttributeNode(fb);
}}eW.nodeValue=eV;

if(parent!=null){parent.appendChild(fc);
}else{fd=fc;
}parent=fc;
fa=fa.child;
eV=cv;
}return {root:fd,inline:fc};
},__ga:qx.core.Environment.select(cw,{"gecko|opera":function(fe,ff){var fl=this.__dq.getSelection();
var fi=this.__dq.getRange();
if(fl.isCollapsed){var fh=bd+(++this.__fI);
var fm=this.__dt.createElement(X);
var fj=this.__dt.createAttribute(cl);
var fg=this.__dt.createAttribute(bv);
var fk=this.__dt.createTextNode(fe);
fg.nodeValue=fh;
fm.setAttributeNode(fg);
fj.nodeValue=fe;
fm.setAttributeNode(fj);
fm.appendChild(fk);
fi.insertNode(fm);
fi.selectNode(fm);
fl.collapseToEnd();
return true;
}else{return this.__dt.execCommand(ff.identifier,false,fe);
}},"mshtml":function(fn,fo){try{var fq;
var fp=this.__fP();
var fr=this.__dq;
var fp=fr.getSavedRange()!=null?fr.getSavedRange():fr.getRange();

if(fp!=null&&fp.text!=cv){fq=fp.execCommand(fo.identifier,false,fn);
}else{fq=this.__fQ(W+fn+bt+fn+J,fo);
}this.__dq.resetSavedRange();
return fq;
}catch(e){return false;
}},"default":function(fs,ft){return this.__dt.execCommand(ft.identifier,false,fs);
}}),__gb:function(fu,fv){var fw=bi;
if((qx.core.Environment.get(cw)==br)){fw+=this.__gc();
}return this.__fQ(fw,fv);
},__gc:function(fx){var fB=cv;
var fA=cT;
var fz=[];
var fE=typeof fx!==o?fx:this.__ge();
var fC=fE.child;
var fD=false;
if(qx.lang.Object.isEmpty(fC)){return cv;
}
while(fC){fD=fC[cu]!=null;
fB+=fD?bj:fA;

for(var fy in fC){fB+=(fy!=bs&&fy!=cu)?fy+a+fC[fy]+cp:cv;
}fB+=fD?cJ+fC[cu]+bt:bt;
fz.unshift(fD?cz:bO);
fC=fC.child;
}if(fz.length==1&&fz[0]==cz){fB+=ba;
}for(var i=0,j=fz.length;i<j;i++){fB+=fz[i];
}return fB;
},__gd:function(){var fG=this.__dt.createDocumentFragment();
var fL=this.__ge();
var parent=fG;
var fJ=fL.child;
var fH;
var fK=false;

while(fJ){fK=fJ[cu]!=null;
fH=this.__dt.createElement(fK?bU:bx);
parent.appendChild(fH);
for(var fF in fJ){if(fF!=bs&&fF!=cu){qx.bom.element.Style.set(fH,fF,fJ[fF]);
}}
if(fK){var fI=this.__dt.createAttribute(c);
fI.nodeValue=fJ[cu];
fH.setAttributeNode(fI);
}parent=fH;
fJ=fJ.child;
}return fG;
},__ge:function(fM){var fO={};
var fP=null;
var fQ=this.getCurrentStyles(fM);
fP=fO.child={};

for(var fN in fQ){if(fN!=cq){fP[fN]=fQ[fN];
}}if(fQ[cq]){var fR=fQ[cq];
for(var i=0,j=fR.length;i<j;i++){if(fP==null){fP=fO.child={};
}else{fP=fP.child={};
}fP[cr]=fR[i][cr];
fP[bo]=fR[i][bo];
}}if(fQ[cr]&&fQ[bo]){fP=fP.child={};
fP[cr]=fQ[cr];
}return fO;
},getCurrentStyles:function(fS){if(fS==null){var fU=this.__dq.getSelection();

if(!fU||fU.focusNode==null){return {};
}fS=(fU.focusNode.nodeType==3)?fU.focusNode.parentNode:fU.focusNode;
}var fV=qx.dom.Hierarchy.getAncestors(fS);
var fX=qx.lang.Array.insertBefore(fV,fS,fV[0]);
var fT=this.__gf(fX);
var fW=this.__gg(fT,fX);
return fW;
},__gf:function(fY){var gc={};
var ga,gb;

for(var i=0,j=fY.length;i<j;i++){gb=fY[i];

for(var k=0,l=gb.style.length;k<l;k++){ga=gb.style[k];

if(ga.length>0&&typeof gc[ga]===o){gc[ga]=gb.style.getPropertyValue(ga);
}}if(gb.tagName.toUpperCase()==L&&gb.size&&gc[cu]===undefined){gc[cu]=gb.size;
}}if(gc[cu]&&gc[cx]){delete gc[cx];
}return gc;
},__gg:function(gd,ge){var gj=ge[0];
var gh=this.__dq.getContentWindow().getComputedStyle(gj,null);
var gf;
var gi={};

for(var gg in gd){if(gg!=cu){gf=gh.getPropertyValue(gg);
}else{gf=gd[gg];
}if(gg==cG&&gf==bw){gi[gg]=this.__gi(ge);
}else if(gg==cq){gi[gg]=this.__gh(ge);
}else{gi[gg]=gf;
}}return gi;
},__gh:function(gk){var gn,gp,gl;
var go=[];
var gm=this.__dq.getContentWindow();

for(var i=0,j=gk.length;i<j;i++){gl=gm.getComputedStyle(gk[i],null);
gn=gl.getPropertyValue(cq);
gp=gl.getPropertyValue(cg);
if(gn!=G){go.push({'text-decoration':gn,'color':gp});
}}return go;
},__gi:function(gq){var gs,gr,gt;

for(var i=0;i<gq.length;i++){gs=gq[i];
gr=this.__dq.getContentWindow().getComputedStyle(gs,null);
gt=gr.getPropertyValue(cG);
if(gt!=bw){return gt;
}}},__gj:function(gu,gv){var gH=this.__dq.getSelection();
var gC=((qx.core.Environment.get(cw)==ct))?this.__dq.getRange():gC=gH.getRangeAt(0);
var gD=[];
var gG;
var gB=[A,cd];
var gw,i,j,gE;
gE=((qx.core.Environment.get(cw)==ct))?gC.parentElement():gC.commonAncestorContainer;
if(gE.tagName==m){for(var i=0;i<gB.length;i++){gw=gE.getElementsByTagName(gB[i]);

for(var j=0;j<gw.length;j++){if(gw[j]){gD.push(gw[j]);
}}}}else if(qx.lang.Array.contains(gB,gE.tagName)){gD.push(gE);
}
if(gD.length>0){for(var i=0;i<gD.length;i++){var gy=gD[i];
gG=((qx.core.Environment.get(cw)==ct))?((gy==gE)||(gE.tagName==m)):gH.containsNode(gy,false);
for(j=0;j<gy.childNodes.length;j++){var gA=gy.childNodes[j];
if(gG||(gH.focusNode.nodeValue&&qx.dom.Hierarchy.contains(gA,gH.focusNode)&&(gH.focusOffset==gH.focusNode.nodeValue.length))||(qx.dom.Hierarchy.contains(gA,gH.anchorNode)&&(gH.anchorOffset==0))||(gH.containsNode(gA,false))){gA.style.fontSize=(this.__fH[gu]||gu)+cc;
}}}}else{var gz=((qx.core.Environment.get(cw)==ct))?gE:gH.focusNode;
var gF=qx.dom.Hierarchy.getAncestors(gz);

for(i=0;i<gF.length;i++){if(gF[i].tagName==bB){if((((qx.core.Environment.get(cw)==br))&&((gH.anchorOffset==0)&&(gH.focusNode.nodeValue&&(gH.focusOffset==gH.focusNode.nodeValue.length))&&qx.dom.Hierarchy.contains(gF[i].firstChild,gH.anchorNode)&&qx.dom.Hierarchy.contains(gF[i].lastChild,gH.focusNode)))||(((qx.core.Environment.get(cw)==ct))&&(gC.htmlText==gF[i].innerHTML))){gF[i].style.fontSize=(this.__fH[gu]||gu)+cc;
}break;
}}}if((qx.core.Environment.get(cw)==ct)){this.__dt.body.focus();
this.__dq.getRange().select();
return this.__dt.execCommand(cE,false,gu);
}else if((qx.core.Environment.get(cw)==br)){var parent=gC.commonAncestorContainer;
if(parent.nodeType===1){var gx=parent.getElementsByTagName(bx);

for(i=0;i<gx.length;i++){if(gx[i].style.fontSize){gx[i].style.fontSize=null;
}}}}return this.__dt.execCommand(cE,false,gu);
},__gk:qx.core.Environment.select(cw,{"mshtml":function(gI,gJ){this.__dt.body.focus();
return this.__dt.execCommand(cD,false,gI);
},"gecko|opera":function(gK,gL){this.__dt.body.focus();
return this.__dt.execCommand(bE,false,gK);
},"webkit":function(gM,gN){var gO=this.__dq.getSelection();
var gP=this.__dq.getRange();
if(!gO||!gO.isCollapsed){this.__dt.body.focus();
this.__dt.execCommand(cD,false,gM);
if(gO){gO.collapseToEnd();
}return true;
}else{var gR=gO.anchorOffset;
var gS=gO.anchorOffset;
var gP=gO.getRangeAt(0);
var gQ=gO.anchorNode;
while(gS>0){if(gQ.nodeValue.charCodeAt(gS)==160||gQ.nodeValue.charCodeAt(gS)==32){break;
}else{gS--;
}}while(gR<gQ.nodeValue.length){if(gQ.nodeValue.charCodeAt(gR)==160||gQ.nodeValue.charCodeAt(gR)==32){break;
}else{gR++;
}}gP.setStart(gO.anchorNode,gO.anchorNode.nodeValue.charAt(gS)==n?gS+1:gS);
gP.setEnd(gO.anchorNode,gR);
gO.addRange(gP);
this.__dt.body.focus();
this.__dt.execCommand(cD,false,gM);
gO.collapseToEnd();
return true;
}}}),__gl:function(gT,gU){gT=gT!=null&&typeof gT==cF?gT:bw;
qx.bom.element.Style.set(this.__dt.body,cR,gT);
return true;
},__gm:function(gV,gW){var gX,ha,gY;
var hb=qx.bom.htmlarea.manager.Command;

if(gV==null){gX=null;
}else{gX=gV[0];
ha=gV[1];
gY=gV[2];
}if(gX==null||typeof gX!=cF){qx.bom.element.Style.set(this.__dt.body,cb,cv);
qx.bom.element.Style.set(this.__dt.body,bV,cv);
qx.bom.element.Style.set(this.__dt.body,cA,cv);
return true;
}else{if(gX.search(/^url.*\(/)==-1){gX=be+gX+cm;
}}if(ha!=null&&!qx.lang.String.contains(hb.__fK,ha)){return false;
}else{ha=cW;
}
if(gY!=null){if(qx.lang.Type.isString(gY)&&!qx.lang.String.contains(hb.__fJ,cy+gY+cy)){return false;
}else{if(qx.lang.Type.isArray(gY)&&gY.length==2){gY=gY[0]+n+gY[1];
}else{return false;
}}}else{gY=cP;
}qx.bom.element.Style.set(this.__dt.body,cb,gX);
qx.bom.element.Style.set(this.__dt.body,bV,ha);
qx.bom.element.Style.set(this.__dt.body,cA,gY);
return true;
},__gn:qx.core.Environment.select(cw,{"mshtml":function(hc,hd){var he=this.__dt.body.createTextRange();
he.select();
return true;
},"default":function(hf,hg){return this.__fO(hg.identifier,false,hf);
}}),__go:function(){return this.__dq.getSelectedText();
},__gp:function(){return this.__dq.getSelectedHtml();
},__gq:function(hh,hi){var hm=this.__dq.getFocusNode();

if(hm.textContent==cv){var hk=qx.dom.Hierarchy.getAncestors(hm);
hk.unshift(hm);
var Node=qx.dom.Node;
var hj=qx.bom.element.Style;
var hl=hk.shift();

while(hk.length>0){if(Node.getName(hl)==cn||Node.getName(hl)==bY){break;
}if(hj.get(hl,hh,hj.LOCAL_MODE)==hi){hj.reset(hl,hh);
return true;
}hl=hk.shift();
}}return false;
},__gr:qx.core.Environment.select(cw,{"gecko":function(hn,ho){if(this.__gq(bH,y)){return true;
}else{return this.__fO(ho.identifier,false,hn);
}},"default":function(hp,hq){return this.__fO(hq.identifier,false,hp);
}}),__gs:qx.core.Environment.select(cw,{"gecko":function(hr,hs){if(this.__gq(D,bc)){return true;
}else{return this.__fO(hs.identifier,false,hr);
}},"default":function(ht,hu){return this.__fO(hu.identifier,false,ht);
}}),__gt:qx.core.Environment.select(cw,{"gecko":function(hv,hw){if(this.__gq(h,r)){return true;
}else{return this.__fO(hw.identifier,false,hv);
}},"default":function(hx,hy){return this.__fO(hy.identifier,false,hx);
}}),__gu:qx.core.Environment.select(cw,{"gecko":function(hz,hA){if(this.__gq(h,cj)){return true;
}else{return this.__fO(hA.identifier,false,hz);
}},"default":function(hB,hC){return this.__fO(hC.identifier,false,hB);
}})},destruct:function(){this.__dt=this.__dq=this._commands=null;
this.__fG=this.__fH=null;
}});
})();
(function(){var by="brightness-handle",bx="hue-saturation-handle",bw="hsbSpinner",bv="rgbSpinner",bu="changeValue",bt="hexField",bs="hueSaturationField",br="brightness-field",bq="mousedown",bp="rgb-spinner-red",be="preview-content-old",bd="rgb-spinner-green",bc="brightnessField",bb="hue-saturation-field",ba="hsb-spinner-brightness",Y="preview-content-new",X="hue-saturation-pane",W="rgb-spinner-blue",V="hsb-spinner-hue",U="hsb-spinner-saturation",bF="hex-field",bG="brightnessModifier",bD="blueModifier",bE="saturationModifier",bB="middle",bC="Number",bz="#",bA="redModifier",bH="greenModifier",bI="hueModifier",bi="Integer",bh="brightness-pane",bk="control-pane",bj="preset-grid",bm="mouseup",bl="preset-field-set",bo="qx.event.type.Event",bn="mousemove",bg="hex-field-composite",bf="y",a="rgb-spinner-composite",b="hsb-spinner-composite",c="control-bar",d="mousewheel",f="visual-pane",g="input-field-set",h="preview-field-set",k="black",l="_applyGreen",m="#333",bM="aqua",bL="colorbucket",bK="qx.event.type.Data",bJ="Hex",bQ="#BBB",bP="decoration/colorselector/brightness-handle.gif",bO="Visual",bN="_applySaturation",bS="Preview (Old/New)",bR="FFFFFF",E="decoration/colorselector/brightness-field.png",F="white",C="orange",D="x",I="_applyRed",J="_applyBlue",G="maroon",H="Presets",A="_applyBrightness",B="#999",u="purple",t="red",w="blue",v="_applyHue",q="decoration/colorselector/huesaturation-handle.gif",p="colorselector",s="qx.ui.control.ColorSelector",r="lime",o="#EEE",n="olive",O="RGB",P="decoration/colorselector/huesaturation-field.jpg",Q="navy",R="teal",K="green",L="yellow",M="#666",N="fuchsia",S="Details",T="",z="colorbucket#",y="appear",x="HSB";
qx.Class.define(s,{extend:qx.ui.core.Widget,implement:[qx.ui.form.IColorForm],construct:function(){qx.ui.core.Widget.call(this);
this._setLayout(new qx.ui.layout.VBox());
this._createChildControl(c);
this.addListener(y,this._onAppear,this);
},events:{"dialogok":bo,"dialogcancel":bo,"changeValue":bK},properties:{appearance:{refine:true,init:p},red:{check:bi,init:255,apply:I},green:{check:bi,init:255,apply:l},blue:{check:bi,init:255,apply:J},hue:{check:bC,init:0,apply:v},saturation:{check:bC,init:0,apply:bN},brightness:{check:bC,init:100,apply:A}},members:{__cA:null,__cB:[G,t,C,L,n,u,N,r,K,Q,w,bM,R,k,m,M,B,bQ,o,F],__cC:T,__cD:0,__cE:0,__cF:0,__cG:true,__cH:false,_createChildControlImpl:function(bT,bU){var bV;

switch(bT){case c:bV=new qx.ui.container.Composite(new qx.ui.layout.HBox(10));
bV.add(this.getChildControl(bk));
bV.add(this.getChildControl(f));
this._add(bV);
break;
case f:bV=new qx.ui.groupbox.GroupBox(this.tr(bO));
bV.setLayout(new qx.ui.layout.HBox(10));
bV.add(this.getChildControl(X));
bV.add(this.getChildControl(bh));
break;
case bk:bV=new qx.ui.container.Composite(new qx.ui.layout.VBox(12));
bV.add(this.getChildControl(bl));
bV.add(this.getChildControl(g));
bV.add(this.getChildControl(h),{flex:1});
break;
case X:bV=new qx.ui.container.Composite(new qx.ui.layout.Canvas());
bV.setAllowGrowY(false);
bV.addListener(d,this._onHueSaturationPaneMouseWheel,this);
bV.add(this.getChildControl(bb));
bV.add(this.getChildControl(bx),{left:0,top:256});
break;
case bb:bV=new qx.ui.basic.Image(P);
bV.addListener(bq,this._onHueSaturationFieldMouseDown,this);
break;
case bx:bV=new qx.ui.basic.Image(q);
bV.addListener(bq,this._onHueSaturationFieldMouseDown,this);
bV.addListener(bm,this._onHueSaturationHandleMouseUp,this);
bV.addListener(bn,this._onHueSaturationHandleMouseMove,this);
break;
case bh:bV=new qx.ui.container.Composite(new qx.ui.layout.Canvas());
bV.setAllowGrowY(false);
bV.addListener(d,this._onBrightnessPaneMouseWheel,this);
bV.add(this.getChildControl(br));
bV.add(this.getChildControl(by));
break;
case br:bV=new qx.ui.basic.Image(E);
bV.addListener(bq,this._onBrightnessFieldMouseDown,this);
break;
case by:bV=new qx.ui.basic.Image(bP);
bV.addListener(bq,this._onBrightnessHandleMouseDown,this);
bV.addListener(bm,this._onBrightnessHandleMouseUp,this);
bV.addListener(bn,this._onBrightnessHandleMouseMove,this);
break;
case bl:bV=new qx.ui.groupbox.GroupBox(this.tr(H));
bV.setLayout(new qx.ui.layout.Grow());
bV.add(this.getChildControl(bj));
break;
case bL:bV=new qx.ui.core.Widget();
bV.addListener(bq,this._onColorFieldClick,this);
break;
case bj:cb=new qx.ui.layout.Grid(3,3);
bV=new qx.ui.container.Composite(cb);
var cc;
var ca;

for(var i=0;i<2;i++){for(var j=0;j<10;j++){ca=i*10+j;
cc=this.getChildControl(z+ca);
cc.setBackgroundColor(this.__cB[ca]);
bV.add(cc,{column:j,row:i});
}}break;
case g:bV=new qx.ui.groupbox.GroupBox(this.tr(S));
var cb=new qx.ui.layout.VBox();
cb.setSpacing(10);
bV.setLayout(cb);
bV.add(this.getChildControl(bg));
bV.add(this.getChildControl(a));
bV.add(this.getChildControl(b));
break;
case h:bV=new qx.ui.groupbox.GroupBox(this.tr(bS));
var cb=new qx.ui.layout.HBox(10);
bV.setLayout(cb);
bV.add(this.getChildControl(be),{flex:1});
bV.add(this.getChildControl(Y),{flex:1});
break;
case bg:var bY=new qx.ui.layout.HBox(4);
bY.setAlignY(bB);
bV=new qx.ui.container.Composite(bY);
var ce=new qx.ui.basic.Label(this.tr(bJ));
ce.setWidth(30);
bV.add(ce);
var cd=new qx.ui.basic.Label(bz);
bV.add(cd);
bV.add(this.getChildControl(bF));
break;
case bF:bV=new qx.ui.form.TextField(bR);
bV.setMaxLength(6);
bV.setFilter(/[0-9A-Fa-f]/);
bV.setWidth(55);
bV.addListener(bu,this._onHexFieldChange,this);
break;
case a:var bY=new qx.ui.layout.HBox(4);
bY.setAlignY(bB);
bV=new qx.ui.container.Composite(bY);
var bW=new qx.ui.basic.Label(this.tr(O));
bW.setWidth(30);
bV.add(bW);
bV.add(this.getChildControl(bp));
bV.add(this.getChildControl(bd));
bV.add(this.getChildControl(W));
break;
case bp:bV=new qx.ui.form.Spinner(0,255,255);
bV.setWidth(50);
bV.addListener(bu,this._setRedFromSpinner,this);
break;
case bd:bV=new qx.ui.form.Spinner(0,255,255);
bV.setWidth(50);
bV.addListener(bu,this._setGreenFromSpinner,this);
break;
case W:bV=new qx.ui.form.Spinner(0,255,255);
bV.setWidth(50);
bV.addListener(bu,this._setBlueFromSpinner,this);
break;
case b:var bY=new qx.ui.layout.HBox(4);
bY.setAlignY(bB);
bV=new qx.ui.container.Composite(bY);
var bX=new qx.ui.basic.Label(this.tr(x));
bX.setWidth(30);
bV.add(bX);
bV.add(this.getChildControl(V));
bV.add(this.getChildControl(U));
bV.add(this.getChildControl(ba));
break;
case V:bV=new qx.ui.form.Spinner(0,0,360);
bV.setWidth(50);
bV.addListener(bu,this._setHueFromSpinner,this);
break;
case U:bV=new qx.ui.form.Spinner(0,0,100);
bV.setWidth(50);
bV.addListener(bu,this._setSaturationFromSpinner,this);
break;
case ba:bV=new qx.ui.form.Spinner(0,100,100);
bV.setWidth(50);
bV.addListener(bu,this._setBrightnessFromSpinner,this);
break;
case be:bV=new qx.ui.core.Widget();
break;
case Y:bV=new qx.ui.core.Widget();
break;
}return bV||qx.ui.core.Widget.prototype._createChildControlImpl.call(this,bT);
},setValue:function(cf){var cg;

if(cf==null){this.__cG=true;
cg=[255,255,255];
}else{cg=qx.util.ColorUtil.stringToRgb(cf);
this.__cG=false;
}this.__cH=true;
this.setRed(cg[0]);
this.setGreen(cg[1]);
this.__cH=false;
this.setBlue(cg[2]);
},getValue:function(){return this.__cG?null:bz+qx.util.ColorUtil.rgbToHexString([this.getRed(),this.getGreen(),this.getBlue()]);
},resetValue:function(){this.__cG=true;
this.__cH=true;
this.setRed(255);
this.setGreen(255);
this.__cH=false;
this.setBlue(255);
},__cI:function(){if(!this.__cH){this.__cG=false;
this.fireDataEvent(bu,this.getValue());
}},_applyRed:function(ch,ci){if(this.__cA===null){this.__cA=bA;
}
if(this.__cA!==bv){this.getChildControl(bp).setValue(ch);
}
if(this.__cA!==bt){this._setHexFromRgb();
}
switch(this.__cA){case bv:case bt:case bA:this._setHueFromRgb();
}this._setPreviewFromRgb();
this.__cI();

if(this.__cA===bA){this.__cA=null;
}},_applyGreen:function(cj,ck){if(this.__cA===null){this.__cA=bH;
}
if(this.__cA!==bv){this.getChildControl(bd).setValue(cj);
}
if(this.__cA!==bt){this._setHexFromRgb();
}
switch(this.__cA){case bv:case bt:case bH:this._setHueFromRgb();
}this._setPreviewFromRgb();
this.__cI();

if(this.__cA===bH){this.__cA=null;
}},_applyBlue:function(cl,cm){if(this.__cA===null){this.__cA=bD;
}
if(this.__cA!==bv){this.getChildControl(W).setValue(cl);
}
if(this.__cA!==bt){this._setHexFromRgb();
}
switch(this.__cA){case bv:case bt:case bD:this._setHueFromRgb();
}this._setPreviewFromRgb();
this.__cI();

if(this.__cA===bD){this.__cA=null;
}},_applyHue:function(cn,co){if(this.__cA===null){this.__cA=bI;
}
if(this.__cA!==bw){this.getChildControl(V).setValue(cn);
}
if(this.__cA!==bs){if(this.getChildControl(bx).getBounds()){this.getChildControl(bx).setDomLeft(Math.round(cn/1.40625)+this.getChildControl(X).getPaddingLeft());
}else{this.getChildControl(bx).setLayoutProperties({left:Math.round(cn/1.40625)});
}}
switch(this.__cA){case bw:case bs:case bI:this._setRgbFromHue();
}this._setBrightnessGradiant();

if(this.__cA===bI){this.__cA=null;
}},_applySaturation:function(cp,cq){if(this.__cA===null){this.__cA=bE;
}
if(this.__cA!==bw){this.getChildControl(U).setValue(cp);
}
if(this.__cA!==bs){this._setBrightnessGradiant();

if(this.getChildControl(bx).getBounds()){this.getChildControl(bx).setDomTop(256-Math.round(cp*2.56)+this.getChildControl(X).getPaddingTop());
}else{this.getChildControl(bx).setLayoutProperties({top:256-Math.round(cp*2.56)});
}}
switch(this.__cA){case bw:case bs:case bE:this._setRgbFromHue();
}
if(this.__cA===bE){this.__cA=null;
}},_applyBrightness:function(cr,cs){if(this.__cA===null){this.__cA=bG;
}
if(this.__cA!==bw){this.getChildControl(ba).setValue(cr);
}
if(this.__cA!==bc){var ct=256-Math.round(cr*2.56);

if(this.getChildControl(by).getBounds()){this.getChildControl(by).setDomTop(ct+this.getChildControl(bh).getPaddingTop());
}else{this.getChildControl(by).setLayoutProperties({top:ct});
}}
switch(this.__cA){case bw:case bc:case bG:this._setRgbFromHue();
}
if(this.__cA===bG){this.__cA=null;
}},_onBrightnessHandleMouseDown:function(e){this.getChildControl(by).capture();
this.__cC=by;
var cw=this.getChildControl(br).getContainerLocation();
var cv=this.getChildControl(by).getContainerLocation();
var cu=this.getChildControl(br).getBounds();
this.__cD=cw.top+(e.getDocumentTop()-cv.top)-cu.top;
e.stopPropagation();
},_onBrightnessHandleMouseUp:function(e){this.getChildControl(by).releaseCapture();
this.__cC=null;
},_onBrightnessHandleMouseMove:function(e){if(this.__cC===by){this._setBrightnessOnFieldEvent(e);
e.stopPropagation();
}},_onBrightnessFieldMouseDown:function(e){var location=this.getChildControl(br).getContainerLocation();
var cx=this.getChildControl(by).getBounds();
this.__cD=location.top+(cx.height/2);
this._setBrightnessOnFieldEvent(e);
this.getChildControl(by).capture();
this.__cC=by;
},_onBrightnessPaneMouseWheel:function(e){this.setBrightness(qx.lang.Number.limit(this.getBrightness()-e.getWheelDelta(bf),0,100));
e.stop();
},_setBrightnessOnFieldEvent:function(e){var cy=qx.lang.Number.limit(e.getDocumentTop()-this.__cD,0,256);
this.__cA=bc;

if(this.getChildControl(by).getBounds()){this.getChildControl(by).setDomTop(cy);
}else{this.getChildControl(by).setLayoutProperties({top:cy});
}this.setBrightness(100-Math.round(cy/2.56));
this.__cA=null;
},_onHueSaturationHandleMouseUp:function(e){if(this.__cC){e.stopPropagation();
this.getChildControl(bx).releaseCapture();
this.__cC=null;
}},_onHueSaturationHandleMouseMove:function(e){if(this.__cC===bx){this._setHueSaturationOnFieldEvent(e);
e.stopPropagation();
}},_onHueSaturationFieldMouseDown:function(e){var location=this.getChildControl(bb).getContainerLocation();
var cz=this.getChildControl(bx).getBounds();
var cA=this.getChildControl(bb).getBounds();
this.__cE=location.top+(cz.height/2)-cA.top;
this.__cF=location.left+(cz.width/2)-cA.left;
this._setHueSaturationOnFieldEvent(e);
this.getChildControl(bx).capture();
this.__cC=bx;
},_onHueSaturationPaneMouseWheel:function(e){this.setSaturation(qx.lang.Number.limit(this.getSaturation()-e.getWheelDelta(bf),0,100));
this.setHue(qx.lang.Number.limit(this.getHue()+e.getWheelDelta(D),0,360));
e.stop();
},_setHueSaturationOnFieldEvent:function(e){var cC=qx.lang.Number.limit(e.getDocumentTop()-this.__cE,0,256);
var cB=qx.lang.Number.limit(e.getDocumentLeft()-this.__cF,0,256);
this.getChildControl(bx).setDomPosition(cB,cC);
this.__cA=bs;
this.setSaturation(100-Math.round(cC/2.56));
this.setHue(Math.round(cB*1.40625));
this.__cA=null;
},_setRedFromSpinner:function(){if(this.__cA!==null){return;
}this.__cA=bv;
this.setRed(this.getChildControl(bp).getValue());
this.__cA=null;
},_setGreenFromSpinner:function(){if(this.__cA!==null){return;
}this.__cA=bv;
this.setGreen(this.getChildControl(bd).getValue());
this.__cA=null;
},_setBlueFromSpinner:function(){if(this.__cA!==null){return;
}this.__cA=bv;
this.setBlue(this.getChildControl(W).getValue());
this.__cA=null;
},_setHueFromSpinner:function(){if(this.__cA!==null){return;
}this.__cA=bw;
this.setHue(this.getChildControl(V).getValue());
this.__cA=null;
},_setSaturationFromSpinner:function(){if(this.__cA!==null){return;
}this.__cA=bw;
this.setSaturation(this.getChildControl(U).getValue());
this.__cA=null;
},_setBrightnessFromSpinner:function(){if(this.__cA!==null){return;
}this.__cA=bw;
this.setBrightness(this.getChildControl(ba).getValue());
this.__cA=null;
},_onHexFieldChange:function(e){if(this.__cA!==null){return;
}
try{var cE=this.getChildControl(bF);
var cD=qx.util.ColorUtil.hexStringToRgb(bz+cE.getValue());
}catch(cF){return;
}this.__cA=bt;
this.setRed(cD[0]);
this.setGreen(cD[1]);
this.setBlue(cD[2]);
this.__cA=null;
},_setHexFromRgb:function(){var cG=qx.util.ColorUtil.rgbToHexString([this.getRed(),this.getGreen(),this.getBlue()]);
this.getChildControl(bF).setValue(cG);
},_onColorFieldClick:function(e){var cH=e.getTarget().getBackgroundColor();

if(!cH){return this.error("Missing backgroundColor value for field: "+e.getTarget());
}var cI=qx.util.ColorUtil.stringToRgb(cH);
this.setRed(cI[0]);
this.setGreen(cI[1]);
this.setBlue(cI[2]);
},_setHueFromRgb:function(){switch(this.__cA){case bw:case bs:case bc:break;
default:var cJ=qx.util.ColorUtil.rgbToHsb([this.getRed(),this.getGreen(),this.getBlue()]);
this.setHue(cJ[0]);
this.setSaturation(cJ[1]);
this.setBrightness(cJ[2]);
}},_setRgbFromHue:function(){switch(this.__cA){case bv:case bt:break;
default:var cK=qx.util.ColorUtil.hsbToRgb([this.getHue(),this.getSaturation(),this.getBrightness()]);
this.setRed(cK[0]);
this.setGreen(cK[1]);
this.setBlue(cK[2]);
}},_setPreviewFromRgb:function(){var cL=qx.util.ColorUtil.rgbToRgbString([this.getRed(),this.getGreen(),this.getBlue()]);
this.getChildControl(Y).setBackgroundColor(cL);
},setPreviousColor:function(cM,cN,cO){var cP=qx.util.ColorUtil.rgbToRgbString([cM,cN,cO]);
this.getChildControl(be).setBackgroundColor(cP);
this.setRed(cM);
this.setGreen(cN);
this.setBlue(cO);
},_setBrightnessGradiant:function(){var cQ=qx.util.ColorUtil;
var cR=cQ.hsbToRgb([this.getHue(),this.getSaturation(),255]);
var cS=cQ.rgbToRgbString(cR);
this.getChildControl(br).setBackgroundColor(cS);
},_onAppear:function(e){var cT=qx.util.ColorUtil.rgbToRgbString([this.getRed(),this.getGreen(),this.getBlue()]);
this.getChildControl(be).setBackgroundColor(cT);
this.getChildControl(Y).setBackgroundColor(cT);
}}});
})();

});